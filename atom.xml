<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>KatzenyaSax: Hello!</title>
  
  
  <link href="https://github.com/KatzenyaSax/KatzenyaSax.github.io/atom.xml" rel="self"/>
  
  <link href="https://github.com/KatzenyaSax/KatzenyaSax.github.io/"/>
  <updated>2023-10-28T05:46:23.042Z</updated>
  <id>https://github.com/KatzenyaSax/KatzenyaSax.github.io/</id>
  
  <author>
    <name>KatzenyaSax</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>RabbitMQçš„åŸºç¡€é…ç½®åŠä½¿ç”¨</title>
    <link href="https://github.com/KatzenyaSax/KatzenyaSax.github.io/2023/10/27/213007/"/>
    <id>https://github.com/KatzenyaSax/KatzenyaSax.github.io/2023/10/27/213007/</id>
    <published>2023-10-27T13:30:07.000Z</published>
    <updated>2023-10-28T05:46:23.042Z</updated>
    
    <content type="html"><![CDATA[<p>æ³¨æ„ï¼Œä»¥ä¸‹æ‰€æœ‰å†…å®¹å‡ä¸ºä¸ªäººç†è§£ï¼Œä¸”å»ºç«‹åœ¨å…·ä½“çš„åœºæ™¯ä¸Šï¼Œå¯èƒ½ä¸é€‚åº”æ‰€æœ‰æƒ…å†µ</p><h1 id="RabbitMQ"><a href="#RabbitMQ" class="headerlink" title="RabbitMQ"></a>RabbitMQ</h1><p>å¯ä»¥åœ¨å…è®¸æœ€ç»ˆä¸€è‡´æ€§çš„åœºæ™¯ä¸‹ï¼Œå°†é«˜å¹¶å‘è¯·æ±‚ç®€å•åŒ–ï¼Œä¹Ÿå°±æ˜¯å°†é«˜å¹¶å‘çš„è¯·æ±‚å¤„ç†æˆä¸€æ¡æœ‰åºçš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ¯ä¸€ä¸ªè¯·æ±‚éƒ½å¯ä»¥çœ‹ä½œæ˜¯ä¸€æ¡æ¶ˆæ¯ï¼ŒæœåŠ¡æ¥å£ä¼šç»‘å®šè¿™æ¡é˜Ÿåˆ—ï¼ŒæŒ‰ç…§æ¶ˆæ¯è¿›é˜Ÿåˆ—é¡ºåºä¾æ¬¡å¤„ç†æ¶ˆæ¯</p><p>ç”¨åœ¨è®¢å•æœåŠ¡è¿™ç§ç”¨æˆ·ä¸éœ€è¦ç«‹åˆ»æ‹¿åˆ°åé¦ˆçš„åœºæ™¯ç®€ç›´ç»é…ã€‚</p><h2 id="å·¥ä½œæµç¨‹"><a href="#å·¥ä½œæµç¨‹" class="headerlink" title="å·¥ä½œæµç¨‹"></a>å·¥ä½œæµç¨‹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1.ç”Ÿäº§è€…ï¼ˆPublisherï¼‰ç”Ÿäº§æ¶ˆæ¯ï¼Œé€šè¿‡ä¸€æ¡é•¿è¿æ¥å°†æ¶ˆæ¯é€åˆ°æ¶ˆæ¯ä»£ç†ï¼ˆBrokerï¼‰</span><br><span class="line"></span><br><span class="line">2.æ¶ˆæ¯ç”±æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ç»„æˆï¼Œå…¶ä¸­æ¶ˆæ¯ä½“ä¸­åŒ…å«äº†ä¸€ä¸ªè·¯ç”±ï¼ˆroute-keyï¼‰ï¼Œå†³å®šç€è¯¥æ¶ˆæ¯ä¼šè¿›å…¥å“ªä¸€ä¸ªé˜Ÿåˆ—</span><br><span class="line"></span><br><span class="line">3.æ¶ˆæ¯ä»£ç†å…ˆæ¥æ”¶æ¶ˆæ¯ï¼Œå†å°†å°†æ¶ˆæ¯é€åˆ°äº¤æ¢æœº</span><br><span class="line"></span><br><span class="line">4.äº¤æ¢æœºé€šè¿‡æ¶ˆæ¯çš„æ¶ˆæ¯å¤´åŒ…å«çš„key-routeï¼Œå°†æ¶ˆæ¯é€å…¥å¯¹åº”çš„é˜Ÿåˆ—</span><br><span class="line"></span><br><span class="line">5.æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰é€šè¿‡ä¸€æ¡é•¿è¿æ¥ä¸æ¶ˆæ¯ä»£ç†è¿æ¥</span><br><span class="line"></span><br><span class="line">6.æ¶ˆè´¹è€…ä¸­çš„ä¸åŒæœåŠ¡é€šè¿‡ä¸åŒçš„ä¿¡é“ï¼Œç›‘å¬å¹¶æ¥æ”¶ä¸åŒé˜Ÿåˆ—çš„æ¶ˆæ¯</span><br></pre></td></tr></table></figure><h2 id="å‡ ç§äº¤æ¢æœº"><a href="#å‡ ç§äº¤æ¢æœº" class="headerlink" title="å‡ ç§äº¤æ¢æœº"></a>å‡ ç§äº¤æ¢æœº</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.directorï¼šç‚¹å¯¹ç‚¹æ¨¡å¼ï¼Œä½¿ç”¨route-keyç»‘å®šé˜Ÿåˆ—ï¼Œå¹¶ä¸”route-keyç²¾ç¡®åŒ¹é…</span><br><span class="line"></span><br><span class="line">2.headersï¼šç‚¹å¯¹ç‚¹æ¨¡å¼ï¼Œå±äºJMSçš„ä¸€ç§ï¼Œå·²æ·˜æ±°</span><br><span class="line"></span><br><span class="line">3.fanoutï¼šå¹¿æ’­æ¨¡å¼ï¼Œäº¤æ¢æœºä¸­æ‰€æœ‰é˜Ÿåˆ—éƒ½ä¼šæ”¶åˆ°</span><br><span class="line"></span><br><span class="line">4.topicï¼šå‘å¸ƒè®¢é˜…æ¨¡å¼ï¼ŒåŒæ ·æ˜¯é€šè¿‡route-keyåŒ¹é…ï¼Œä½†æ˜¯å…è®¸ä½¿ç”¨é€šé…ç¬¦éƒ¨åˆ†åŒ¹é…ï¼ŒåŒ¹é…åˆ°çš„é˜Ÿåˆ—å³æ˜¯è®¢é˜…äº†ç”Ÿäº§è€…çš„é˜Ÿåˆ—</span><br></pre></td></tr></table></figure><p>directorå’Œfanoutæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œtopicéœ€è¦æ³¨æ„ï¼Œè¯¥ç§äº¤æ¢æœºç»‘å®šé˜Ÿåˆ—æ—¶åŒæ ·éœ€è¦å£°æ˜route-keyï¼Œä¾‹å¦‚ï¼š</p><pre><code>#.aaa       ï¼ˆé˜Ÿåˆ—1ï¼‰bbb.#       ï¼ˆé˜Ÿåˆ—2ï¼‰#.ccc.bbb   ï¼ˆé˜Ÿåˆ—3ï¼‰</code></pre><p>å…¶ä¸­é€šé…ç¬¦#è¡¨ç¤ºè¯¥å¤„å¯ä»¥æ˜¯ä»»æ„ä¸ªä»»ä½•å­—ç¬¦ï¼Œä½†æ˜¯å¿…é¡»è¦æœ‰å­—ç¬¦ã€‚é™¤æ­¤ä¹‹å¤–è·¯ç”±é”®è¿˜å®Œå…¨éœ€è¦æ»¡è¶³å¯¹åº”çš„å½¢å¼ã€‚</p><h2 id="ä½¿ç”¨dockerå®‰è£…RabbitMQ"><a href="#ä½¿ç”¨dockerå®‰è£…RabbitMQ" class="headerlink" title="ä½¿ç”¨dockerå®‰è£…RabbitMQ"></a>ä½¿ç”¨dockerå®‰è£…RabbitMQ</h2><p>ç›´æ¥å¯åŠ¨rabbitmq:management</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name rabbitmq -p 5671:5671 -p 5672:5672 -p 4369:4369 -p 25672:25672 -p 15671:15671 -p 15672:15672 rabbitmq:management</span><br></pre></td></tr></table></figure><p>æ²¡æœ‰é•œåƒä¸ç”¨æ…Œï¼Œdockerä¼šè‡ªåŠ¨è”ç½‘ä¸‹è½½é•œåƒï¼Œè¯·ç¡®ä¿ç½‘ç»œé€šç•…ã€‚</p><p>å¯åŠ¨æ—¶ï¼Œå¿…é¡»æŒ‰ç…§ç›¸åŒçš„ç«¯å£æ˜ å°„ï¼Œå¯åŠ¨åè®¿é—®æœ¬æœºï¼ˆlinuxè®¾å¤‡ï¼‰çš„15672ç«¯å£å³å¯æŠµè¾¾rabbitmqçš„æ§åˆ¶å°ã€‚</p><h1 id="SpringBootæ•´åˆRabbitMQ"><a href="#SpringBootæ•´åˆRabbitMQ" class="headerlink" title="SpringBootæ•´åˆRabbitMQ"></a>SpringBootæ•´åˆRabbitMQ</h1><h2 id="æ·»åŠ ä¾èµ–"><a href="#æ·»åŠ ä¾èµ–" class="headerlink" title="æ·»åŠ ä¾èµ–"></a>æ·»åŠ ä¾èµ–</h2><p>åœ¨è¦ä½¿ç”¨RabbitMQçš„æœåŠ¡ä¸­ç›´æ¥å¼•å…¥å…¶å¯åŠ¨ä¾èµ–<br>    <!-- rabbitMQæ•´åˆä¾èµ– --><br>    <!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-amqp --></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="é…ç½®RabbitMQ"><a href="#é…ç½®RabbitMQ" class="headerlink" title="é…ç½®RabbitMQ"></a>é…ç½®RabbitMQ</h2><p>åœ¨æœåŠ¡çš„applicationä¸­æ·»åŠ ä¸Šï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">    <span class="attr">rabbitmq:</span></span><br><span class="line">        <span class="attr">addresses:</span> <span class="number">192.168</span><span class="number">.74</span><span class="number">.130</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">5672</span></span><br><span class="line">        <span class="attr">virtual-host:</span> <span class="string">/</span></span><br></pre></td></tr></table></figure><p>åˆ†åˆ«è¡¨ç¤ºé…ç½®RabbitMQæ‰€åœ¨çš„ipã€ç«¯å£ï¼Œå’Œä½¿ç”¨çš„è™šæ‹Ÿä¸»æœºï¼ˆé»˜è®¤åº”ä¸º&#x2F;ï¼‰</p><h2 id="å¯åŠ¨ç±»ä¸Šå¼€å¯RabbitMQåŠŸèƒ½"><a href="#å¯åŠ¨ç±»ä¸Šå¼€å¯RabbitMQåŠŸèƒ½" class="headerlink" title="å¯åŠ¨ç±»ä¸Šå¼€å¯RabbitMQåŠŸèƒ½"></a>å¯åŠ¨ç±»ä¸Šå¼€å¯RabbitMQåŠŸèƒ½</h2><p>ä¹Ÿå³æ˜¯åŠ ä¸Šæ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableRabbit</span></span><br></pre></td></tr></table></figure><p>è‡³æ­¤é…ç½®å®Œæ¯•</p><h1 id="åœ¨SpringBootä¸­ä½¿ç”¨RabbitMQ"><a href="#åœ¨SpringBootä¸­ä½¿ç”¨RabbitMQ" class="headerlink" title="åœ¨SpringBootä¸­ä½¿ç”¨RabbitMQ"></a>åœ¨SpringBootä¸­ä½¿ç”¨RabbitMQ</h1><h2 id="å£°æ˜å„ç§MQç»„ä»¶"><a href="#å£°æ˜å„ç§MQç»„ä»¶" class="headerlink" title="å£°æ˜å„ç§MQç»„ä»¶"></a>å£°æ˜å„ç§MQç»„ä»¶</h2><p>åœ¨SpringBootä¸­ï¼Œå¯ä»¥ä½¿ç”¨AmpqAdminç±»æ¥è¿›è¡ŒMQç»„ä»¶çš„åˆ›å»ºï¼Œä¸€èˆ¬ä½¿ç”¨å…¶è‡ªå¸¦çš„declareç³»åˆ—æ–¹æ³•è¿›è¡Œåˆ›å»ºã€‚</p><h3 id="å£°æ˜ä¸€ä¸ªäº¤æ¢æœº"><a href="#å£°æ˜ä¸€ä¸ªäº¤æ¢æœº" class="headerlink" title="å£°æ˜ä¸€ä¸ªäº¤æ¢æœº"></a>å£°æ˜ä¸€ä¸ªäº¤æ¢æœº</h3><p>æµ‹è¯•æ–¹æ³•ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">rabbitTest01</span><span class="params">()</span>&#123;</span><br><span class="line">    DirectExchange directExchange=<span class="keyword">new</span> <span class="title class_">DirectExchange</span>(</span><br><span class="line">            <span class="string">&quot;spring.test01.directExchange&quot;</span>      <span class="comment">//åç§°</span></span><br><span class="line">            ,<span class="literal">true</span>                       <span class="comment">//æ˜¯å¦æŒä¹…åŒ–</span></span><br><span class="line">            ,<span class="literal">false</span>          <span class="comment">//æ˜¯å¦è‡ªåŠ¨åˆ é™¤</span></span><br><span class="line">    );</span><br><span class="line">    amqpAdmin.declareExchange(directExchange);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…ˆåˆ›å»ºä¸€ä¸ªäº¤æ¢æœºï¼Œåç§°ä¸ºspring.test01.directExchangeï¼Œè®¾å®šä¸ºæŒä¹…åŒ–ã€ä¸è‡ªåŠ¨åˆ é™¤ã€‚amqpAdminçš„declareExchangeæ–¹æ³•ï¼Œç”¨äºâ€œå®£ç§°â€ä¹Ÿå³æ˜¯åˆ›å»ºä¸€ä¸ªäº¤æ¢æœºã€‚</p><h3 id="å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—"><a href="#å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—" class="headerlink" title="å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—"></a>å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—</h3><p>æµ‹è¯•æ–¹æ³•ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">createQueue</span><span class="params">()</span>&#123;</span><br><span class="line">    Queue queue=<span class="keyword">new</span> <span class="title class_">Queue</span>(</span><br><span class="line">            <span class="string">&quot;spring.test01.queue01&quot;</span></span><br><span class="line">            ,<span class="literal">true</span>                       <span class="comment">//æŒä¹…åŒ–</span></span><br><span class="line">            ,<span class="literal">false</span>              <span class="comment">//æ’ä»–æ€§</span></span><br><span class="line">            ,<span class="literal">false</span>          <span class="comment">//è‡ªåŠ¨åˆ é™¤</span></span><br><span class="line">    );</span><br><span class="line">    <span class="comment">//å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—</span></span><br><span class="line">    amqpAdmin.declareQueue(queue);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Queueçš„å¯¹è±¡æ„é€ æ–¹æ³•å‚æ•°æœ‰å››ä¸ªï¼šåå­—ã€æ˜¯å¦æŒä¹…åŒ–ã€æ˜¯å¦æ’ä»–ã€æ˜¯å¦è‡ªåŠ¨åˆ é™¤</p><h3 id="å£°æ˜ä¸€ä¸ªç»‘å®šå…³ç³»"><a href="#å£°æ˜ä¸€ä¸ªç»‘å®šå…³ç³»" class="headerlink" title="å£°æ˜ä¸€ä¸ªç»‘å®šå…³ç³»"></a>å£°æ˜ä¸€ä¸ªç»‘å®šå…³ç³»</h3><p>æµ‹è¯•æ–¹æ³•ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">createBinding</span><span class="params">()</span>&#123;</span><br><span class="line">    Binding binding=<span class="keyword">new</span> <span class="title class_">Binding</span>(</span><br><span class="line">            <span class="string">&quot;spring.test01.queue01&quot;</span>             <span class="comment">//ç›®çš„åœ°</span></span><br><span class="line">            , Binding.DestinationType.QUEUE     <span class="comment">//ç›®çš„åœ°çš„ç±»å‹</span></span><br><span class="line">            ,<span class="string">&quot;spring.test01.directExchange&quot;</span>     <span class="comment">//äº¤æ¢æœºåç§°</span></span><br><span class="line">            ,<span class="string">&quot;testRK&quot;</span>                           <span class="comment">//è·¯ç”±é”®</span></span><br><span class="line">            ,<span class="literal">null</span>                               <span class="comment">//è‡ªå®šä¹‰å‚æ•°ï¼Œè¿™é‡Œå…ˆä¸è®¨è®º</span></span><br><span class="line">    );</span><br><span class="line">    <span class="comment">//å£°æ˜ä¸€ä¸ªç»‘å®šå…³ç³»</span></span><br><span class="line">    amqpAdmin.declareBinding(binding);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆæ˜ç¡®ï¼Œåœ¨RabbitMQä¸­ï¼Œç»‘å®šä¸€å®šæœ‰äº¤æ¢æœºå‚ä¸çš„ï¼Œå¯ä»¥æ˜¯äº¤æ¢æœºä¹‹é—´ç»‘å®šï¼Œä¹Ÿå¯ä»¥æ˜¯äº¤æ¢æœºä¸é˜Ÿåˆ—çš„ç»‘å®šï¼Œä½†æ˜¯ä¸å…è®¸å‘ç”Ÿé˜Ÿåˆ—ä¸é˜Ÿåˆ—ä¹‹é—´çš„ç»‘å®šï¼Œä¹Ÿå¯ä»¥ç†è§£ï¼Œæ¯•ç«Ÿä»»ä½•æ¶ˆæ¯è¦ä»äº¤æ¢æœºå‘é€å‡ºå»ï¼Œé˜Ÿåˆ—æœ¬èº«æ˜¯æ¶ˆæ¯æ¥æ”¶è€…ï¼Œåœ¨æ²¡æœ‰äº¤æ¢æœºçš„å‰æä¸‹è‡ªèº«æ˜¯ä¸å¯èƒ½äº§ç”Ÿæ¶ˆæ¯çš„ï¼Œé˜Ÿåˆ—é—´çš„ç»‘å®šå› æ­¤æ˜¯æ²¡æœ‰æ„ä¹‰çš„</p><h2 id="å‘é€æ¶ˆæ¯"><a href="#å‘é€æ¶ˆæ¯" class="headerlink" title="å‘é€æ¶ˆæ¯"></a>å‘é€æ¶ˆæ¯</h2><h3 id="ç®€å•çš„æ¶ˆæ¯å‘é€"><a href="#ç®€å•çš„æ¶ˆæ¯å‘é€" class="headerlink" title="ç®€å•çš„æ¶ˆæ¯å‘é€"></a>ç®€å•çš„æ¶ˆæ¯å‘é€</h3><p>ä½¿ç”¨RabbitTemplateçš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ›å»ºå¹¶å‘é€æ¶ˆæ¯çš„convertAndSendæ–¹æ³•ã€‚</p><p>æµ‹è¯•æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">rabbitMessageSending</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºå¹¶å‘é€æ¶ˆæ¯</span></span><br><span class="line">    rabbitTemplate.convertAndSend(</span><br><span class="line">            <span class="string">&quot;spring.test01.directExchange&quot;</span></span><br><span class="line">            ,<span class="string">&quot;testRK&quot;</span></span><br><span class="line">            ,<span class="string">&quot;ttttest&quot;</span>);</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure><p>å‚æ•°å…ˆåæ˜¯ï¼šäº¤æ¢æœºã€è·¯ç”±é”®ã€æ¶ˆæ¯</p><h3 id="åºåˆ—åŒ–è¾“å‡ºObejctå¯¹è±¡"><a href="#åºåˆ—åŒ–è¾“å‡ºObejctå¯¹è±¡" class="headerlink" title="åºåˆ—åŒ–è¾“å‡ºObejctå¯¹è±¡"></a>åºåˆ—åŒ–è¾“å‡ºObejctå¯¹è±¡</h3><p>ä¸Šé¢çš„ä¾‹å­çœ‹å‡ºï¼Œrabbitå‘é€æ¶ˆæ¯å¯ä»¥å‘é€Stringç±»å‹çš„æ•°æ®ï¼Œä½†æ˜¯ä¹Ÿä»…é™äºStringè¿™ç§è¾ƒä¸ºé€šç”¨å’Œç‰¹æ®Šçš„æ•°æ®ç±»å‹äº†ã€‚ä¸€èˆ¬çš„Objectå¯¹è±¡ï¼Œrabbitæ˜¯æ— æ³•å‘é€çš„ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿è¯¥ç±»å®ç°ä¸€ä¸ªSerializeableæ¥å£ï¼Œå‘Šè¯‰rabbitå¯ä»¥åºåˆ—åŒ–è¾“å‡ºå¯¹è±¡ï¼Œå°±ç”¨javaè‡ªå¸¦çš„åºåˆ—åŒ–æ–¹æ³•å°±è¡Œ</p><p>ä¾‹å¦‚æˆ‘æœ‰ä¸€ä¸ªEntityç±»ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Entity</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String VerbI;</span><br><span class="line">    <span class="keyword">private</span> String VerbII;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æˆ‘ä»¬ä¾¿å¯ä»¥å°†è¯¥ç±»çš„å¯¹è±¡è¾“å‡ºä¸ºåºåˆ—åŒ–å½¢å¼ï¼Œæµ‹è¯•æ–¹æ³•ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">rabbitMessageSending</span><span class="params">()</span>&#123;</span><br><span class="line">    Entity message=<span class="keyword">new</span> <span class="title class_">Entity</span>();</span><br><span class="line">    message.setVerbI(<span class="string">&quot;I&quot;</span>);</span><br><span class="line">    message.setVerbII(<span class="string">&quot;II&quot;</span>)</span><br><span class="line">    <span class="comment">//å‘é€æ¶ˆæ¯</span></span><br><span class="line">    rabbitTemplate.convertAndSend(</span><br><span class="line">            <span class="string">&quot;spring.test01.directExchange&quot;</span></span><br><span class="line">            ,<span class="string">&quot;testRK&quot;</span></span><br><span class="line">            ,message);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‘é€æˆåŠŸåï¼Œå¯ä»¥åœ¨å®¢æˆ·ç«¯å¾—çŸ¥é˜Ÿåˆ—æ”¶åˆ°äº†ä¸€æ¡æ¶ˆæ¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">rO0ABXNyAC1jb20ua2F0emVueWFzYXgubWFsbC5vcmRlci5lbnRpdHkuT3JkZXJFbnRpdHkAAAAAAAAAAQIAKkwADmF1dG9Db25maXJtRGF5dAATTGphdmEv</span><br><span class="line">bGFuZy9JbnRlZ2VyO0wAC2JpbGxDb250ZW50dAASTGphdmEvbGFuZy9TdHJpbmc7TAAKYmlsbEhlYWRlcnEAfgACTAARYmlsbFJlY2VpdmVyRW1haWxxAH4A</span><br><span class="line">AkwAEWJpbGxSZWNlaXZlclBob25lcQB+AAJMAAhiaWxsVHlwZXEAfgABTAALY29tbWVudFRpbWV0ABBMamF2YS91dGlsL0RhdGU7TAANY29uZmlybVN0YXR1</span><br><span class="line">c3EAfgABTAAMY291cG9uQW1vdW50dAAWTGphdmEvbWF0aC9CaWdEZWNpbWFsO0wACGNvdXBvbklkdAAQTGphdmEvbGFuZy9Mb25nO0wACmNyZWF0ZVRpbWVx</span><br><span class="line">AH4AA0wADGRlbGV0ZVN0YXR1c3EAfgABTAAPZGVsaXZlcnlDb21wYW55cQB+AAJMAApkZWxpdmVyeVNucQB+AAJMAAxkZWxpdmVyeVRpbWVxAH4AA0wADmRp</span><br><span class="line">c2NvdW50QW1vdW50cQB+AARMAA1mcmVpZ2h0QW1vdW50cQB+AARMAAZncm93dGhxAH4AAUwAAmlkcQB+AAVMAAtpbnRlZ3JhdGlvbnEAfgABTAARaW50ZWdy</span><br><span class="line">YXRpb25BbW91bnRxAH4ABEwACG1lbWJlcklkcQB+AAVMAA5tZW1iZXJVc2VybmFtZXEAfgACTAAKbW9kaWZ5VGltZXEAfgADTAAEbm90ZXEAfgACTAAHb3Jk</span><br><span class="line">ZXJTbnEAfgACTAAJcGF5QW1vdW50cQB+AARMAAdwYXlUeXBlcQB+AAFMAAtwYXltZW50VGltZXEAfgADTAAPcHJvbW90aW9uQW1vdW50cQB+AARMAAtyZWNl</span><br><span class="line">aXZlVGltZXEAfgADTAAMcmVjZWl2ZXJDaXR5cQB+AAJMABVyZWNlaXZlckRldGFpbEFkZHJlc3NxAH4AAkwADHJlY2VpdmVyTmFtZXEAfgACTAANcmVjZWl2</span><br><span class="line">ZXJQaG9uZXEAfgACTAAQcmVjZWl2ZXJQb3N0Q29kZXEAfgACTAAQcmVjZWl2ZXJQcm92aW5jZXEAfgACTAAOcmVjZWl2ZXJSZWdpb25xAH4AAkwACnNvdXJj</span><br><span class="line">ZVR5cGVxAH4AAUwABnN0YXR1c3EAfgABTAALdG90YWxBbW91bnRxAH4ABEwADnVzZUludGVncmF0aW9ucQB+AAF4cHBwcHBwcHBwcHBwcHBwcHBwcHBwcHNy</span><br><span class="line">AA5qYXZhLmxhbmcuTG9uZzuL5JDMjyPfAgABSgAFdmFsdWV4cgAQamF2YS5sYW5nLk51bWJlcoaslR0LlOCLAgAAeHAAAAAAAAAAAXQABGhkb3dwcHBwcHBw</span><br><span class="line">cHBwcHBwcHBwcHBw</span><br></pre></td></tr></table></figure><p>æ€»ä¹‹æ˜¯å¯ä»¥è¾“å‡ºä»»æ„Objectç±»äº†ï¼Œä¸”ç”¨çš„æ˜¯javaè‡ªå¸¦çš„åºåˆ—åŒ–æ–¹æ³•</p><h3 id="åºåˆ—åŒ–Obejctä¸ºJSONæ ¼å¼"><a href="#åºåˆ—åŒ–Obejctä¸ºJSONæ ¼å¼" class="headerlink" title="åºåˆ—åŒ–Obejctä¸ºJSONæ ¼å¼"></a>åºåˆ—åŒ–Obejctä¸ºJSONæ ¼å¼</h3><p>ä¸Šé¢ä¹Ÿçœ‹åˆ°äº†ï¼Œç”¨javaè‡ªå¸¦çš„åºåˆ—åŒ–æ–¹æ³•å¾ˆä¸å‹å¥½ï¼Œèƒ½ä¸èƒ½åºåˆ—åŒ–æˆJSONæ ¼å¼å‘¢ï¼Ÿ</p><p>è¿˜çœŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ã€‚å†™ä¸€ä¸ªé…ç½®ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RabbitSerializeConfiguration</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MessageConverter <span class="title function_">messageConverter</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Jackson2JsonMessageConverter</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿç›¸å½“äºé‡å†™äº†rabbité»˜è®¤çš„æ¶ˆæ¯è½¬æ¢å™¨ï¼Œå› ä¸ºå®ä¾‹åŒ–ä¸€ä¸ªrabbitTemplateå•ä¾‹æ—¶ï¼Œå…¶ä¼šè°ƒç”¨ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œæ°å¥½å°±åå«MessageConverterï¼Œå®ƒçš„è¿”å›å€¼å°±æ˜¯ä¸€ä¸ªé»˜è®¤çš„åºåˆ—åŒ–æ–¹å¼ã€‚</p><p>è€Œé»˜è®¤çš„æ¶ˆæ¯è½¬æ¢å™¨çš„é€»è¾‘æ˜¯ï¼Œå¦‚æœæ˜¯Stringç±»å‹æ¶ˆæ¯å°±ç›´æ¥è¾“å‡ºåŸæœ¬çš„æ¶ˆæ¯ï¼›å¦‚æœä¸æ˜¯å°±å‚ç…§javaé»˜è®¤çš„åºåˆ—åŒ–æœºåˆ¶ã€‚</p><p>è€Œæˆ‘ä»¬åœ¨é…ç½®ç±»ä¸­åŠ å…¥äº†åŒåçš„ç»„ä»¶MessgaeConverterï¼Œç³»ç»Ÿé…ç½®æ—¶ä¼šç›´æ¥è°ƒç”¨ä¸”ä¼˜å…ˆè°ƒç”¨è¿™ä¸ªåŒåæ–¹æ³•ï¼Œè¿™ä¸€ä¸¾åŠ¨ä¼šä½¿è¯¥æ–¹æ³•ä¼ é€’ç»™rabbitTemplateçš„é»˜è®¤åºåˆ—åŒ–æ–¹å¼è¢«é¡¶æ›¿ä¸ºJSONåºåˆ—åŒ–æ–¹å¼ï¼Œä¹Ÿå³æ˜¯newçš„ä¸€ä¸ªJackson2JsonMessageConverter()ã€‚</p><p>æ€»ä¹‹æˆ‘ä»¬å†æ¬¡æµ‹è¯•æ—¶ï¼Œæ¶ˆæ¯ä¼šå˜æˆï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;VerbI&quot;:&quot;I&quot;,&quot;VerbII&quot;:&quot;II&quot;&#125;</span><br></pre></td></tr></table></figure><h2 id="æ¥æ”¶æ¶ˆæ¯"><a href="#æ¥æ”¶æ¶ˆæ¯" class="headerlink" title="æ¥æ”¶æ¶ˆæ¯"></a>æ¥æ”¶æ¶ˆæ¯</h2><h3 id="ç®€å•çš„æ¶ˆæ¯æ¥æ”¶"><a href="#ç®€å•çš„æ¶ˆæ¯æ¥æ”¶" class="headerlink" title="ç®€å•çš„æ¶ˆæ¯æ¥æ”¶"></a>ç®€å•çš„æ¶ˆæ¯æ¥æ”¶</h3><p>éœ€è¦ä½¿ç”¨@RabbitListeneræ³¨è§£ï¼Œæµ‹è¯•æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç›‘å¬æ¶ˆæ¯é˜Ÿåˆ—ï¼Œè·å–æ¶ˆæ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RabbitListener(queues = &#123;&quot;spring.test01.queue01&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenMessage</span><span class="params">(Message message)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;ç›‘å¬åˆ°æ¶ˆæ¯ï¼š&quot;</span>+message.toString()+<span class="string">&quot;ï¼Œç±»å‹ä¸ºï¼š&quot;</span>+message.getClass());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ä¸€ä¸‹ï¼Œè¯¥æ³¨è§£åªæœ‰åœ¨å®¹å™¨å†…æ‰èƒ½ç”Ÿæ•ˆï¼Œä¹Ÿå°±æ˜¯åœ¨å„ç§ç»„ä»¶é‡Œé¢@Serviceã€@Controllerã€@Componentç­‰æ‰è¡Œã€‚</p><p>å¼€å¯æœåŠ¡ï¼Œè¿è¡Œä¸€ä¸‹ä¸Šé¢å‘é€Objectç±»çš„æµ‹è¯•æ–¹æ³•ï¼Œçœ‹çœ‹æ‰“å°ç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç›‘å¬åˆ°æ¶ˆæ¯ï¼š(Body:&#x27;[B@1f06c07c(byte[820])&#x27; MessageProperties [headers=&#123;__TypeId__=Entity&#125;, contentType=application/json, contentEncoding=UTF-8, contentLength=0, receivedDeliveryMode=PERSISTENT, priority=0, redelivered=false, receivedExchange=spring.test01.directExchange, receivedRoutingKey=testRK, deliveryTag=1, consumerTag=amq.ctag-zOPjexiGSPI21zDUGAr-mA, consumerQueue=spring.test01.queue01])ï¼Œç±»å‹ä¸ºï¼šclass org.springframework.amqp.core.Message</span><br></pre></td></tr></table></figure><h3 id="æ¥æ”¶ç‰¹å®šç±»å‹æ¶ˆæ¯"><a href="#æ¥æ”¶ç‰¹å®šç±»å‹æ¶ˆæ¯" class="headerlink" title="æ¥æ”¶ç‰¹å®šç±»å‹æ¶ˆæ¯"></a>æ¥æ”¶ç‰¹å®šç±»å‹æ¶ˆæ¯</h3><p>æ¥æ”¶æ¶ˆæ¯æ—¶ä¹Ÿå¯ä»¥ç›´æ¥æŠŠå¯¹è±¡ç±»å‹æ”¾ä¸Šå»ï¼Œæµ‹è¯•æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenMessage</span><span class="params">(Message message,Entity body)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;ç›‘å¬åˆ°æ¶ˆæ¯ï¼š&quot;</span>+body);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœ‹çœ‹ç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç›‘å¬åˆ°æ¶ˆæ¯ï¼šEntity(VerbI=&quot;I&quot;,VerbII=&quot;II&quot;)</span><br></pre></td></tr></table></figure><h3 id="ç”šè‡³å¯ä»¥æ‹¿åˆ°ä¿¡é“"><a href="#ç”šè‡³å¯ä»¥æ‹¿åˆ°ä¿¡é“" class="headerlink" title="ç”šè‡³å¯ä»¥æ‹¿åˆ°ä¿¡é“"></a>ç”šè‡³å¯ä»¥æ‹¿åˆ°ä¿¡é“</h3><p>æµ‹è¯•æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenMessage</span><span class="params">(Message message, Entity body, Channel channel)</span>&#123;&#125;</span><br></pre></td></tr></table></figure><p>å…·ä½“æœ‰ä»€ä¹ˆç”¨æˆ‘å°±ä¸æ¸…æ¥šäº†</p><h3 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h3><p>@RabbitListeneråªèƒ½æ”¯æŒåŒä¸€ä¸ªæ¶ˆæ¯è¢«ä»…ä»…ä¸€ä¸ªæœåŠ¡ç›‘å¬åˆ°ï¼Œä½†æ˜¯å½“é˜Ÿåˆ—ä¸­ç¢°åˆ°å¾ˆå¤šæ¡æ¶ˆæ¯æ—¶ï¼Œæ¶ˆæ¯å¯ä»¥è¢«è´Ÿè½½å‡è¡¡åˆ°ä¸åŒçš„æœåŠ¡ã€‚</p><p>æ›´æç«¯çš„æƒ…å†µï¼Œä¾‹å¦‚æ¶ˆæ¯é˜Ÿåˆ—é‡Œæ¶ˆæ¯å¤ªå¤šï¼Œæ¯”æœåŠ¡å™¨æ•°é‡è¿˜å¤šæ€ä¹ˆåŠå‘¢ï¼Ÿé‚£å°±åªæœ‰åœ¨ä¸€å°æœåŠ¡å™¨å¤„ç†å®Œä¸€ä¸ªæ¶ˆæ¯æ—¶ï¼Œæ‰èƒ½æ¥æ”¶ä¸‹ä¸€ä¸ªæ¶ˆæ¯ï¼Œæœªè¢«æ¥æ”¶çš„æ¶ˆæ¯å°±ä¼šé˜»å¡åœ¨æ¶ˆæ¯ä»£ç†ä¸­ç­‰å¾…è¢«å¤„ç†</p><h3 id="RabbitHandler"><a href="#RabbitHandler" class="headerlink" title="@RabbitHandler"></a>@RabbitHandler</h3><p>è¿˜æœ‰ä¸€ä¸ªæ³¨è§£æ˜¯@RabbitHandlerï¼Œå®ƒå¯ä»¥å’Œ@RabbitListeneræ³¨è§£æ­é…ä½¿ç”¨ï¼Œå°±å¯ä»¥åŒºåˆ†é˜Ÿåˆ—æ¶ˆæ¯çš„ç±»å‹<br>å°†@RabbitListeneræ”¾åœ¨ç±»ä¸Šï¼Œ@RabbitHandleræ”¾åœ¨æ–¹æ³•ä¸Šï¼Œä¾‹å¦‚æ‹¿ä¸€ä¸ªä¸šåŠ¡å±‚æ¥å£Serviceå¼€åˆ€ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RabbitListener(queues = &#123;&quot;spring.test01.queue01&quot;&#125;)</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Service</span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * ç›‘å¬Entityå¯¹è±¡æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@RabbitHandler</span></span><br><span class="line">    <span class="comment">//@RabbitListener(queues = &#123;&quot;spring.test01.queue01&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenEntityMessage</span><span class="params">(Message message, Entity body, Channel channe&#123;</span></span><br><span class="line"><span class="params">        System.out.println(<span class="string">&quot;æ¥æ”¶åˆ°Entityå¯¹è±¡æ¶ˆæ¯ï¼š&quot;</span>+body)</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * æ¥æ”¶Stringå¯¹è±¡æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@RabbitHandler</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenStringMessage</span><span class="params">(String message)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ¥å—åˆ°Stringå¯¹è±¡æ¶ˆæ¯ï¼š&quot;</span>+message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†æ¬¡åˆ†åˆ«è°ƒç”¨ä¸Šé¢çš„ä¸¤ä¸ªå‘é€æ¶ˆæ¯çš„æµ‹è¯•æ–¹æ³•ï¼ŒæŸ¥çœ‹ç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ¥å—åˆ°Stringå¯¹è±¡æ¶ˆæ¯ï¼šttttest</span><br><span class="line">æ¥æ”¶åˆ°Entityå¯¹è±¡æ¶ˆæ¯ï¼šEntity(VerbI=&quot;I&quot;,VerbII=&quot;II&quot;)</span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´é€šè¿‡é…åˆä½¿ç”¨@RabbitListenerå’Œ@RabbitHandlerï¼Œå¯ä»¥åšåˆ°ç›¸å½“äºæ–¹æ³•çš„é‡è½½ï¼Œæ ¹æ®å‚æ•°ç±»å‹çš„ä¸åŒè€Œé‡‡å–ä¸åŒçš„å¤„ç†æ–¹å¼</p><h1 id="å¯é æŠ•é€’"><a href="#å¯é æŠ•é€’" class="headerlink" title="å¯é æŠ•é€’"></a>å¯é æŠ•é€’</h1><p>é˜²æ­¢æ¶ˆæ¯åœ¨å‘é€ã€æ¥æ”¶è¿‡ç¨‹ä¸­å› ä¸ºä¸€ç³»åˆ—åŸå› å¯¼è‡´çš„çš„æ¶ˆæ¯ä¸¢å¤±ã€‚</p><p>ä¸€ç§è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨äº‹åŠ¡ï¼Œä½†æ˜¯æ®rabbitMQå®˜æ–¹è¯´æ³•ï¼Œè¿™å¯èƒ½ä¼šä½¿æ€§èƒ½ä¸‹é™250å€ï¼Œå› æ­¤ä¸æ¨èä½¿ç”¨ã€‚</p><p>è€Œå¦ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ç¡®è®¤æœºåˆ¶ï¼Œå…·ä½“å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.Publisherå‘é€æ¶ˆæ¯åˆ°Brokerï¼Œè‹¥Brokeræ”¶åˆ°äº†æ¶ˆæ¯åˆ™è°ƒç”¨ä¸€ä¸ªæ–¹æ³•confirmCallbackè¿›è¡Œç¡®è®¤</span><br><span class="line"></span><br><span class="line">2.Brokeré€šè¿‡Exchangeå°†æ¶ˆæ¯å‘å¾€Queueï¼Œè‹¥Queueæœªæ”¶åˆ°æ¶ˆæ¯ï¼Œåˆ™è°ƒç”¨ä¸€ä¸ªæ–¹æ³•returnCallbackè¡¨ç¤ºæœªæ”¶åˆ°æ¶ˆæ¯</span><br><span class="line"></span><br><span class="line">3.Consumerå¼€å§‹æ¥æ”¶Queueçš„æ¶ˆæ¯æ—¶ï¼Œé‡‡ç”¨çš„æ˜¯ackæœºåˆ¶ï¼Œè‹¥Consumeræ­£ç¡®åœ°æ¶ˆè´¹åˆ°äº†æ¶ˆæ¯åˆ™å°†æ¶ˆæ¯ä»Queueä¸­åˆ é™¤ï¼Œå¦åˆ™é€€å›åˆ°Queueæˆ–é‡æ–°æŠ•é€’ç­‰</span><br></pre></td></tr></table></figure><h2 id="ç”Ÿäº§è€…åˆ°æ¶ˆæ¯ä»£ç†ç¡®è®¤"><a href="#ç”Ÿäº§è€…åˆ°æ¶ˆæ¯ä»£ç†ç¡®è®¤" class="headerlink" title="ç”Ÿäº§è€…åˆ°æ¶ˆæ¯ä»£ç†ç¡®è®¤"></a>ç”Ÿäº§è€…åˆ°æ¶ˆæ¯ä»£ç†ç¡®è®¤</h2><h3 id="é…ç½®application"><a href="#é…ç½®application" class="headerlink" title="é…ç½®application"></a>é…ç½®application</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">    <span class="attr">rabbitmq:</span></span><br><span class="line">        <span class="attr">publisher-confirm-type:</span> <span class="string">correlated</span></span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰COnfirmCallback"><a href="#è‡ªå®šä¹‰COnfirmCallback" class="headerlink" title="è‡ªå®šä¹‰COnfirmCallback"></a>è‡ªå®šä¹‰COnfirmCallback</h3><p>éœ€è¦å†™ä¸€ä¸ªé…ç½®ç±»ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RabbitConfirmConfiguration</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    RabbitTemplate rabbitTemplate;</span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRabbitTemplate</span><span class="params">()</span>&#123;</span><br><span class="line">        rabbitTemplate.setConfirmCallback(</span><br><span class="line">                (correlationData, b, s) -&gt; System.out.println(<span class="string">&quot;CorrelationData: &quot;</span>+correlationDa+<span class="string">&quot; , ack: &quot;</span>+b+<span class="string">&quot; reason: &quot;</span>+s)</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆæ˜ç¡®ï¼Œè®©Springè‡ªåŠ¨é…ç½®çš„ä¸€ä¸ªå•ä¾‹rabbitTemplateï¼Œåœ¨æ•´ä¸ªæœåŠ¡å™¨è¿è¡Œçš„æœŸé—´éƒ½æ˜¯åŒä¸€ä¸ªï¼Œå› æ­¤åªè¦æˆ‘ä»¬æ‰¾åˆ°å®ƒå¹¶ä¸”å°†å…¶éƒ¨åˆ†é…ç½®ä¿®æ”¹ï¼Œå°±èƒ½è®©å…¶åœ¨æ•´ä¸ªæœåŠ¡å™¨æœŸé—´éƒ½éµä»æˆ‘ä»¬çš„é…ç½®ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å°†rabbitTemplateçš„ConfirmCallbackä¿®æ”¹ä¸ºæˆ‘ä»¬æ‰€éœ€è¦çš„å¤„ç†æ–¹æ³•ï¼Œä¹Ÿå³æ˜¯é‡å†™ã€‚</p><p>æ³¨æ„è¿™é‡Œæœ‰å‘ï¼Œè¿™ä¸ªé…ç½®ç»„ä»¶ä¸åº”è¯¥å’Œä¸Šé¢çš„RabbitSerializeConfigurationå†™åœ¨ä¸€èµ·ï¼Œä¼šå¾ªç¯ä¾èµ–ï¼Œå…·ä½“åŸå› å°±æ˜¯RabbitTemplateä¾èµ–äºRabbitSerializeConfigurationä¸­è‡ªå®šä¹‰åºåˆ—åŒ–è½¬æ¢å™¨ï¼Œè€Œè¯¥é…ç½®ç±»æœ‰å¼•å…¥äº†RabbitTemplateçš„å•ä¾‹å®ä¾‹åŒ–å¯¹è±¡ï¼ŒäºŒè€…ä¼šé€ æˆäº†å¾ªç¯ä¾èµ–</p><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>è¿˜æ˜¯ç”¨å‘é€æ¶ˆæ¯çš„æµ‹è¯•æ–¹æ³•å‘é€ä¸€ä¸ªæ¶ˆæ¯ï¼Œåé¦ˆæ¶ˆæ¯ä¼šåé¦ˆåˆ°æ¶ˆæ¯å‘é€è€…ï¼Œä¹Ÿå°±æ˜¯ä¸´æ—¶å®¢æˆ·ç«¯ï¼Œç»“æœä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CorrelationData: null , ack: true reason: null</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œçš„ackå‚æ•°ï¼Œåªè¦æ¶ˆæ¯ä»Publisherä¼ åˆ°Brokerï¼Œéƒ½æ˜¯trueï¼Œä»–ä¸ä¼šå‚è€ƒåç»­è¿›å±•ã€‚äº‹å®ä¸Šï¼Œackçš„ä½œç”¨å°±æ˜¯ç”¨æ¥è¡¨ç¤ºæ¶ˆæ¯æ˜¯å¦è¢«åˆ é™¤ï¼Œåœ¨è¿™é‡Œå°±å¯ä»¥çœ‹ä½œæ˜¯ï¼ŒPublisherå°†æ¶ˆæ¯å¤åˆ¶äº†ä¸€ä»½äº¤ç»™Brokerï¼ŒBrokeræ”¶åˆ°åå°±ç»™ä¸€ä¸ªåé¦ˆConfirmCallbackå‘Šè¯‰Publisheræœ‰æ²¡æœ‰æ”¶åˆ°æ¶ˆæ¯ï¼Œå¦‚æœæ”¶åˆ°äº†ï¼Œackå°±ä¸ºtrueï¼Œæ¶ˆæ¯å°±ä¼šä»Publisheråˆ é™¤ï¼›æ²¡æœ‰æ”¶åˆ°ackå°±ä¸ºfalseï¼Œè¯¥æ¶ˆæ¯å¯èƒ½ä¼šé‡å‘ï¼Œä¹Ÿå¯èƒ½ä¼šç›´æ¥ä¸¢å¼ƒï¼Œä¾ç…§å…·ä½“é…ç½®æ‰§è¡Œã€‚</p><p>æ³¨æ„ï¼Œä¸Šè¿°è¿‡ç¨‹å¯ä»¥çœ‹ä½œæ˜¯æ•´ä¸ªrabbitMQä¸­ï¼Œä¸¤ç‚¹é—´æ¶ˆæ¯ä¼ é€’ç¡®è®¤æœºåˆ¶çš„æ¨¡æ¿ï¼ŒåŸºæœ¬ä¸Šå¤§å·®ä¸å·®ï¼ŒåŒºåˆ«å¯èƒ½ä»…åœ¨äºä»»ä½•å¤„ç†å‘é€å¤±è´¥çš„æ¶ˆæ¯ã€‚</p><h2 id="æ¶ˆæ¯ä»£ç†åˆ°é˜Ÿåˆ—ç¡®è®¤"><a href="#æ¶ˆæ¯ä»£ç†åˆ°é˜Ÿåˆ—ç¡®è®¤" class="headerlink" title="æ¶ˆæ¯ä»£ç†åˆ°é˜Ÿåˆ—ç¡®è®¤"></a>æ¶ˆæ¯ä»£ç†åˆ°é˜Ÿåˆ—ç¡®è®¤</h2><h3 id="é…ç½®application-1"><a href="#é…ç½®application-1" class="headerlink" title="é…ç½®application"></a>é…ç½®application</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">     <span class="attr">rabbitmq:</span></span><br><span class="line">        <span class="attr">publisher-returns:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">template:</span></span><br><span class="line">            <span class="attr">mandatory:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>publisher-returnsè¡¨ç¤ºå¼€å¯æ¶ˆæ¯ä»£ç†åˆ°é˜Ÿåˆ—çš„ç¡®è®¤ï¼Œè€Œtemplate.mandatoryè¡¨ç¤ºä»¥å¼‚æ­¥ï¼ˆæ–°å¼€ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼‰æ–¹å¼å›è°ƒreturnã€‚</p><h3 id="å†™é…ç½®ç±»"><a href="#å†™é…ç½®ç±»" class="headerlink" title="å†™é…ç½®ç±»"></a>å†™é…ç½®ç±»</h3><p>åœ¨ä¸Šé¢çš„é…ç½®ç±»ä¸­setConfirmCallbackåé¢åŠ ä¸ŠsetReturnCallback</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 2.brokeråˆ°queueçš„ç¡®è®¤</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">rabbitTemplate.setReturnsCallback(returnedMessage -&gt;</span><br><span class="line">    System.out.println(</span><br><span class="line">        <span class="string">&quot;å‘é€å¤±è´¥çš„æ¶ˆæ¯å†…å®¹: &quot;</span>+returnedMessage.getMessage()</span><br><span class="line">        +<span class="string">&quot; å›å¤çš„çŠ¶æ€ç : &quot;</span>+ returnedMessage.getReplyCode()</span><br><span class="line">        +<span class="string">&quot; å›å¤çš„æ–‡æœ¬å†…å®¹: &quot;</span>+ returnedMessage.getReplyText()</span><br><span class="line">        +<span class="string">&quot; å‘é€è¯¥æ¶ˆæ¯çš„äº¤æ¢æœº: &quot;</span>+returnedMessage.getExchange()</span><br><span class="line">        +<span class="string">&quot; è·¯ç”±é”®: &quot;</span>+returnedMessage.getRoutingKey()</span><br><span class="line">    )</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•-1"><a href="#æµ‹è¯•-1" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>ä¸ºäº†äººä¸ºé€ æˆå‘é€å¤±è´¥ï¼Œå°†æµ‹è¯•æ–¹æ³•çš„è·¯ç”±é”®æš‚æ—¶ä¿®æ”¹ï¼Œéšåæµ‹è¯•.åŒæ ·æ˜¯åœ¨å‘é€æ¶ˆæ¯çš„å®¢æˆ·ç«¯ä¸­ï¼Œä½†æ˜¯æ²¡æœ‰åœ¨ä¸´æ—¶å®¢æˆ·ç«¯çš„testç»“æœä¸­ç‰¹åˆ«å±•ç¤ºï¼Œè¦åœ¨å®Œæ•´ç»ˆç«¯æŸ¥çœ‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å‘é€å¤±è´¥çš„æ¶ˆæ¯å†…å®¹: (Body:&#x27;&quot;ttttest&quot;&#x27; MessageProperties [headers=&#123;__TypeId__=java.lang.String&#125;, contentType=application/json, contentEncoding=UTF-8, contentLength=0, receivedDeliveryMode=PERSISTENT, priority=0, deliveryTag=0]) å›å¤çš„çŠ¶æ€ç : 312 å›å¤çš„æ–‡æœ¬å†…å®¹: NO_ROUTE å‘é€è¯¥æ¶ˆæ¯çš„äº¤æ¢æœº: spring.test01.directExchange è·¯ç”±é”®: ttttestRK</span><br></pre></td></tr></table></figure><p>ç¡®å®æ˜¯æœ‰é”™è¯¯æç¤ºï¼Œè€Œä¸”ä¼šç»™å‡ºé”™è¯¯çš„åŸå› ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å›å¤çš„çŠ¶æ€ç : 312 </span><br><span class="line">å›å¤çš„æ–‡æœ¬å†…å®¹: NO_ROUTE</span><br><span class="line">å‘é€è¯¥æ¶ˆæ¯çš„äº¤æ¢æœº: spring.test01.directExchange </span><br><span class="line">è·¯ç”±é”®: ttttestRK</span><br></pre></td></tr></table></figure><p>åŸå› å°±æ˜¯NO_ROUTEï¼Œå³æ˜¯æ‰¾ä¸åˆ°è·¯ç”±é”®</p><h2 id="é˜Ÿåˆ—åˆ°æ¶ˆè´¹è€…ç¡®è®¤"><a href="#é˜Ÿåˆ—åˆ°æ¶ˆè´¹è€…ç¡®è®¤" class="headerlink" title="é˜Ÿåˆ—åˆ°æ¶ˆè´¹è€…ç¡®è®¤"></a>é˜Ÿåˆ—åˆ°æ¶ˆè´¹è€…ç¡®è®¤</h2><p>RabbitMQè‡ªå¸¦ä¸€ä¸ªè‡ªåŠ¨ackçš„æœºåˆ¶ï¼Œä¸€æ—¦æ¥æ”¶åˆ°æ•°æ®å°±ä¼šå›å¤ackç»™é˜Ÿåˆ—ï¼Œé˜Ÿåˆ—æ¥åˆ°åé¦ˆåå°±ä¼šåˆ é™¤æ¶ˆæ¯<br>ä½†æ˜¯ä¸€ä¸ªå¾ˆä¸¥é‡çš„ç¼ºé™·æ˜¯ï¼Œè¯¥æœºåˆ¶å…è®¸æœåŠ¡å™¨ä¸€æ¥æ”¶åˆ°æ¶ˆæ¯å°±å›å¤ackï¼Œä¹Ÿå°±æ˜¯æˆ‘åªç®¡æ¥æ”¶åˆ°ï¼Œæˆ‘ä¸€æ¥æ”¶åˆ°ï¼Œé˜Ÿåˆ—å°±åˆ é™¤è¯¥æ¶ˆæ¯ã€‚</p><p>ä½†æ˜¯ä»é€»è¾‘ä¸Šè®²ï¼ŒæœåŠ¡å™¨æ¥æ”¶åˆ°æ¶ˆæ¯åè¿˜åº”è¯¥è¿›è¡Œå¤„ç†ï¼Œè‹¥æ˜¯åœ¨è¿™æ®µå¤„ç†çš„æ—¶é—´å†…æœåŠ¡å™¨å®•æœºï¼Œé‚£ä¹ˆæ­¤æ—¶æœåŠ¡å™¨ä¸¢å¤±äº†æ¶ˆæ¯ï¼Œè€Œé˜Ÿåˆ—é‚£è¾¹æ—©å°±æŠŠæ¶ˆæ¯åˆ äº†ï¼Œè¿™å°±å¯¼è‡´æ¶ˆæ¯çš„ä¸¢å¤±ã€‚</p><p>æ›´ä¸¥é‡çš„æ˜¯ï¼ŒæœåŠ¡å™¨ä¸€å®•æœºï¼Œé˜Ÿåˆ—é‚£è¾¹å‰©ä½™é˜»å¡çš„æ¶ˆæ¯ä¹Ÿä¼šå…¨éƒ¨æ¸…ç©ºã€‚</p><p>å”¯ä¸€çš„è§£å†³æ–¹æ¡ˆæ˜¯æ‰‹åŠ¨ç¡®è®¤</p><h3 id="é…ç½®application-2"><a href="#é…ç½®application-2" class="headerlink" title="é…ç½®application"></a>é…ç½®application</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">    <span class="attr">rabbitmq:</span></span><br><span class="line">        <span class="attr">istener:</span></span><br><span class="line">            <span class="attr">simple:</span></span><br><span class="line">                <span class="attr">acknowledge-mode:</span> <span class="string">manual</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œé™¤éæˆ‘ä»¬æ‰‹åŠ¨ç¡®è®¤æ¶ˆæ¯ï¼Œå¦åˆ™æ¶ˆæ¯åœ¨é˜Ÿåˆ—ä¸­æ˜¯ä¸ä¼šåˆ é™¤çš„ï¼Œä¸”ä¼šä¸€ç›´å¤„äºreadyçŠ¶æ€</p><h3 id="æ‰‹åŠ¨ç¡®è®¤"><a href="#æ‰‹åŠ¨ç¡®è®¤" class="headerlink" title="æ‰‹åŠ¨ç¡®è®¤"></a>æ‰‹åŠ¨ç¡®è®¤</h3><p>åœ¨æ¥æ”¶æ¶ˆæ¯çš„æ–¹æ³•åé¢æ‰‹åŠ¨ç¡®è®¤ackï¼ŒåŠ ä¸Šchannel.basicAck()æ–¹æ³•ï¼Œå‰ææ˜¯å‚æ•°è¡¨ä¸­è·å–äº†channel</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç›‘å¬Entityå¯¹è±¡æ¶ˆæ¯</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * åŠ ä¸Šäº†æ‰‹åŠ¨ç¡®è®¤ack</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RabbitHandler</span></span><br><span class="line"><span class="comment">//@RabbitListener(queues = &#123;&quot;spring.test01.queue01&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenEntityMessage</span><span class="params">(Message message, Entity body, Channel channel)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ¥æ”¶åˆ°Entityå¯¹è±¡æ¶ˆæ¯ï¼š&quot;</span>+body);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        channel.basicAck(</span><br><span class="line">                message.getMessageProperties().getDeliveryTag()     <span class="comment">//æ¶ˆæ¯çš„tag</span></span><br><span class="line">                , <span class="literal">false</span>                                         <span class="comment">//æ˜¯å¦æ‰¹é‡ç¡®è®¤</span></span><br><span class="line">        );</span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">        System.out.println(message.getMessageProperties().getDeliveryTag()+<span class="string">&quot;å·æ¶ˆæ¯&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¶ˆæ¯çš„tagï¼Œæ ¹æ®æ¶ˆæ¯è¿›å…¥channelçš„é¡ºåºï¼Œä»1å¼€å§‹çš„è‡ªå¢idã€‚</p><p>ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæ˜¯å¦è¿å¸¦ç¡®è®¤åé¢è¿›å…¥è¯¥channelçš„æ‰€æœ‰æ¶ˆæ¯ï¼Œå»ºè®®false</p><p>è€ŒåŒæ ·ï¼ŒbasicNack()æ–¹æ³•å°±æ˜¯ä¸ç¡®è®¤ackï¼Œä½†æ˜¯ç›¸æ¯”basicAckä¼šå¤šå‡ºä¸€ä¸ªå‚æ•°requeueï¼Œè¡¨ç¤ºæ˜¯å¦å°†æ¶ˆæ¯é€€å›é˜Ÿåˆ—é‡æ–°readyï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">channel.basicNack(</span><br><span class="line">    message.getMessageProperties().getDeliveryTag()     <span class="comment">//æ¶ˆæ¯çš„tag</span></span><br><span class="line">    , <span class="literal">false</span>                                         <span class="comment">//æ˜¯å¦æ‰¹é‡ç¡®è®¤</span></span><br><span class="line">    , <span class="literal">true</span>                                          <span class="comment">//é€€å›é˜Ÿåˆ—ï¼Œæˆ–æ˜¯åˆ é™¤æ¶ˆæ¯</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ³¨æ„ï¼Œä»¥ä¸‹æ‰€æœ‰å†…å®¹å‡ä¸ºä¸ªäººç†è§£ï¼Œä¸”å»ºç«‹åœ¨å…·ä½“çš„åœºæ™¯ä¸Šï¼Œå¯èƒ½ä¸é€‚åº”æ‰€æœ‰æƒ…å†µ&lt;/p&gt;
&lt;h1 id=&quot;RabbitMQ&quot;&gt;&lt;a href=&quot;#RabbitMQ&quot; class=&quot;headerlink&quot; title=&quot;RabbitMQ&quot;&gt;&lt;/a&gt;RabbitMQ&lt;/h1&gt;&lt;p&gt;å¯ä»¥</summary>
      
    
    
    
    
    <category term="RabbitMQ" scheme="https://github.com/KatzenyaSax/KatzenyaSax.github.io/tags/RabbitMQ/"/>
    
    <category term="ä¸­é—´ä»¶" scheme="https://github.com/KatzenyaSax/KatzenyaSax.github.io/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>javaä¸‰ä¸ªæœˆï¼šä»å…¥é—¨åˆ°é—¨é•¿è…¿è·‘äº†</title>
    <link href="https://github.com/KatzenyaSax/KatzenyaSax.github.io/2023/10/25/110959/"/>
    <id>https://github.com/KatzenyaSax/KatzenyaSax.github.io/2023/10/25/110959/</id>
    <published>2023-10-25T03:09:59.000Z</published>
    <updated>2023-10-28T01:19:45.432Z</updated>
    
    <content type="html"><![CDATA[<p>ç®—ä¸Šä»Šå¤©ï¼Œå­¦javaä¹Ÿå­¦äº†ä¸‰ä¸ªæœˆäº†ï¼Œæ„Ÿè§‰è¿˜æ˜¯æ²¡å•¥å®æ„Ÿï¼Œæ€ä¹ˆè¿™ä¹ˆå¿«å‘¢ï¼Ÿ</p><h2 id="â€œæˆ‘æ€ä¹ˆä¼šå­¦javaå‘¢ï¼Ÿâ€"><a href="#â€œæˆ‘æ€ä¹ˆä¼šå­¦javaå‘¢ï¼Ÿâ€" class="headerlink" title="â€œæˆ‘æ€ä¹ˆä¼šå­¦javaå‘¢ï¼Ÿâ€"></a>â€œæˆ‘æ€ä¹ˆä¼šå­¦javaå‘¢ï¼Ÿâ€</h2><p>å®è¯å®è¯´ï¼Œåœ¨æ­£å¼å­¦javaä¹‹å‰ï¼Œjavaç»™æˆ‘çš„å°è±¡ä¸€ç›´æ˜¯è·Ÿé£ç‹—ã€å·ã€å¸¦ä¸“å“¥æœ€çˆ±ï¼Œå½“ç„¶æˆ‘å­¦äº†ä¹‹åè¿™ä¸ªåˆ»æ¿å°è±¡ç‹ ç‹ åœ°åˆåŠ æ·±äº†ğŸ˜‚ï¼Œåæ­£æˆ‘ä¹Ÿæ˜¯è·Ÿé£å­¦çš„javaï¼Œæˆ‘å°±æ˜¯è·Ÿé£ç‹—å‘—ï¼Ÿè·Ÿé£çš„èµ·å› æ˜¯6æœˆ7æœˆä»½çš„æ—¶å€™ï¼Œçœ‹è§ç¾¤é‡Œæ°´å‹è€æ˜¯â€œæ“mallæ“mallâ€å•¥çš„ï¼Œæˆ‘å¯»æ€mallæ˜¯ä»€ä¹ˆç©æ„ï¼Œå°±å»æœäº†ï¼Œæƒ³ç€è‡ªå·±èƒ½ä¸èƒ½æä¸€ä¸ªå‡ºæ¥ï¼Œç„¶åé‚£å¤©æ˜¯7æœˆ24å·ï¼Œä¸€ä¸ªæ— é£çš„å‚æ™šï¼Œæˆ‘å¯¹ç€ç½‘ä¸Šéšä¾¿æ‹›çš„ä¸€ä¸ªæ•™ç¨‹å¹²çªçœ¼ï¼Œä¸€ç›´æŒç»­åˆ°æ™šä¸Šåƒå®Œé¥­ï¼Œæˆ‘ç»ˆäºç†è§£äº†ï¼Œè¿™æ˜¯ä¸€ä¸ªå‘ï¼Œè¿˜æ˜¯å¤©å‘ã€‚</p><p>ä¸è¿‡å¥½åœ¨æˆ‘ç«‹åˆ»å°±æ„è¯†åˆ°è¿™ä¸ªé¡¹ç›®çš„è¯­è¨€ï¼šjavaï¼Œè¿™ä¸ªä¸œè¥¿ä»¥å‰å°±æ•´è¿‡æˆ‘ï¼Œæ‰€ä»¥æˆ‘ä¸€ç›´å¯¹å…¶æŠ±æœ‰ä¸€ç§å¾®å¦™çš„æƒ…ç»ªã€‚æˆ‘ä¾ç¨€è®°å¾—å°æ—¶å€™ä¸ºäº†ç©mcï¼Œè£…ç¯å¢ƒè£…äº†ä¸€ä¸ªä¸‹åˆï¼Œæ‚¨èƒ½ç†è§£ä¸€ä¸ªå°å­¦ç”Ÿå¯¹ç€ä¸€å¤§å †è‹±æ–‡æ— æ•°æ¬¡è¯•é”™å—ï¼Ÿæ€»ä¹‹åœ¨æ­¤ä¹‹åjavaå°±æˆäº†ä¸€ä¸ªèƒŒæ™¯æ¿çš„ç©æ„ï¼Œåªè¦æœ‰äººé—®èµ·æˆ‘å°±çŸ¥é“ï¼Œå“¦javaå°±æ˜¯å†™mcçš„ï¼Œæ›´å¤šä¸€ç‚¹æˆ‘ä¼šå‘Šè¯‰äººè¿™ä¼¼ä¹æ˜¯ä¸€æ¬¾ç¼–ç¨‹çš„ä¸œè¥¿ï¼Œå†å¤šä¸€ç‚¹æˆ‘å°±ä¸çŸ¥é“äº†ï¼Œåæ­£ä¸Šå¤§å­¦äº†ï¼Œmcä¹Ÿç©çš„å°‘äº†ï¼Œjavaå¯¹æˆ‘æ¥è¯´ä¹Ÿå˜æˆäº†ä¸€ä¸ªå¯æœ‰å¯æ— çš„ä¸œè¥¿ï¼Œå¹¶ä¸”æˆ‘è¿˜éå¸¸ä¹æ„å»çœ‹åˆ«äººæœ‰å…³javaå·²æ­»çš„è¨€è®ºï¼Œä¸€æ–¹é¢javaç‰ˆmcçš„ä¼˜åŒ–ç¡®å®çƒ‚ï¼Œå¦ä¸€æ–¹é¢æ˜¯æˆ‘æœ¬èº«æ²¡èƒ½ä¸Šåˆ°è®¡ç®—æœºä¸“ä¸šï¼Œäºæ˜¯å¯¹è®¡ç®—æœºæœ‰ç€ä¸€ç§è¿‘ä¹ä»‡è§†çš„æ€åº¦ï¼Œâ€œç”µå­ä¸æ¯”ä½ è®¡ç®—æœºå·®ï¼â€â€œç¡¬ä»¶ä¸æ˜¯è½¯ä»¶çš„çˆ¹ï¼Ÿâ€æˆ‘å°±æŠ±ç€è¿™ç§è™šå‡çš„éª„å‚²å¯¹ä¸€åˆ‡ä¸è®¡ç®—æœºç›¸å…³çš„é¢†åŸŸä¸€è§†åŒä»ï¼Œjavaä¹Ÿä¸ä¾‹å¤–ï¼Œâ€œæˆ‘æ€ä¹ˆä¼šå­¦javaå‘¢ï¼Ÿâ€æˆä¸ºäº†æˆ‘å¯¹javaæœ€å¤–æ˜¾çš„æ€åº¦ã€‚è™½ç„¶æˆ‘å±•ç°å‡ºä¸€å¹…â€œä¸å±‘å­¦è½¯ä»¶â€çš„æ€åº¦ï¼Œä½†æˆ‘çŸ¥é“è¿™æœ¬è´¨ä¸Šåªæ˜¯åƒä¸åˆ°è‘¡è„è¯´è‘¡è„é…¸ç½¢äº†ã€‚</p><p>åœ¨æ˜çŸ¥è¿™æ˜¯ä¸€ä¸ªå¤§å‘çš„æƒ…å†µä¸‹ï¼Œæˆ‘æ¯…ç„¶è¿ˆæ­¥ï¼Œä¸€æ–¹é¢æ˜¯å‡ºäºå¯¹æœªæ¥é“è·¯çš„é€‰æ‹©ç„¦è™‘ï¼Œå¦ä¸€æ–¹é¢æ˜¯æˆ‘ç¡®å®å¤ªèœäº†ï¼Œæˆ‘ä¸¤å¹´åœ¨å­¦è¿‡çš„å«é‡‘é‡æœ€é«˜çš„é¢å‘ä¼ä¸šçš„æŠ€èƒ½å±…ç„¶æ˜¯ç”µç„Šã€‚æ‰€ä»¥å‡ ä¹æ˜¯å‘½è¿ä¸€èˆ¬ï¼Œæˆ‘å…œå…œè½¬è½¬åœ°åˆå›åˆ°äº†javaï¼Œäºæ˜¯åœ¨ä¸€ä¸ªç‚çƒ­çš„ä¸Šåˆï¼Œæˆ‘é¡ºåˆ©æå®šäº†å¼€å‘ç¯å¢ƒï¼Œæ­£å¼å¼€å¯äº†javaçš„å­¦ä¹ ï¼Œé‚£ä¸€å¤©æ˜¯7æœˆ25æ—¥ã€‚</p><h2 id="â€œæˆ‘ä»¬ç§°ä¹‹ä¸ºé«˜æ•ˆâ€"><a href="#â€œæˆ‘ä»¬ç§°ä¹‹ä¸ºé«˜æ•ˆâ€" class="headerlink" title="â€œæˆ‘ä»¬ç§°ä¹‹ä¸ºé«˜æ•ˆâ€"></a>â€œæˆ‘ä»¬ç§°ä¹‹ä¸ºé«˜æ•ˆâ€</h2><p>æˆ‘å…ˆå­¦çš„javaseï¼Œæˆ‘åªèƒ½åº†å¹¸æœ‰ä¸€ç‚¹ç‚¹çš„c++åŸºç¡€ï¼Œè¯´åˆ°c++ï¼Œå…¶å®æˆ‘ä¸€å¼€å§‹æ˜¯å‡†å¤‡å—¯é€ c++çš„ï¼Œä½†æ˜¯æœ€åä¹Ÿæ²¡æœ‰åšæŒä¸‹åˆ—ï¼Œä½†æ˜¯javaå’Œc++åŸºç¡€çš„è¯­æ³•éƒ½æ˜¯å¤§å·®ä¸å·®çš„ï¼Œæ‰€ä»¥ç›´æ¥å¼€å§‹äº†å„ç§javaseå¸¸è§apiçš„ä½¿ç”¨ã€‚</p><p>å­¦ä¹ çš„è¿‡ç¨‹å€’æ˜¯æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå­¦å®Œjavaseï¼Œçœ‹äº†ä¸€ä¸‹javawebï¼Œç²—ç•¥äº†è§£äº†ä¸€ä¸‹springbootã€mybatisç­‰ï¼Œä¹Ÿäº†è§£äº†ä¸€äº›æœ‰å…³åˆ†å¸ƒå¼çš„çŸ¥è¯†ï¼Œjavawebæ•™ç¨‹ä¸Šæ•™çš„æ˜¯å•ä½“é¡¹ç›®ï¼Œå…¸ä¸­å…¸ä¹‹å‘˜å·¥ç®¡ç†ç³»ç»Ÿï¼Œæˆ‘æƒ³éƒ½æ²¡æƒ³å°±è·³è¿‡äº†ï¼Œæˆ‘ç°åœ¨æ€¥éœ€çš„æ˜¯äº†è§£ä¸€äº›å«é‡‘é‡æ›´é«˜çš„çŸ¥è¯†ã€‚åœ¨è¿™ä¸ªæ—¶æœŸæˆ‘é€æ¸äº†è§£åˆ°ï¼Œæˆ‘è¦å­¦çš„mallï¼Œå¹¶éæ˜¯ä¸€ä¸ªç‰¹å®šçš„é¡¹ç›®ï¼Œè€Œæ˜¯ä¸€ç±»é¡¹ç›®çš„é€šç§°ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“åœ¨å“ªçŸ¥é“äº†è°·ç²’å•†åŸè¿™ä¸ªé¡¹ç›®ä¸é”™ï¼Œä¹Ÿç»è¿‡äº†å¤§ä½¬çš„ä¸€äº›æŒ‡ç‚¹ï¼Œæˆ‘å°±å°†çŸ­æœŸç›®æ ‡æ”¾åœ¨äº†è°·ç²’å•†åŸä¸Šï¼Œç‹ ç‹ åœ°è¡¥è¶³è°·ç²’å•†åŸå‰ç½®çš„ä¸€äº›åŸºç¡€æ¡ä»¶ï¼Œå¯ä»¥è¯´åœ¨æ­£å¼è¿›å…¥è°·ç²’å•†åŸå‰ï¼Œæˆ‘çš„å­¦ä¹ è¿˜æ˜¯ç›¸å½“å¹³å¦çš„ï¼Œé™¤äº†åœ¨å·²ç»èƒ½å¤Ÿä½¿ç”¨springbootçš„å‰æä¸‹èŠ±äº†ä¸€æ•´ä¸ªæ˜ŸæœŸè¡¥äº†ä¸€ä¸‹ssmï¼Œæœ€ååªç•™ä¸‹ä¸€è„¸æ‡µé€¼çš„æˆ‘ä¸€è„¸æ‡µé€¼ï¼Œè¿™äº›ä¸œè¥¿å¯èƒ½ä½œç”¨å¾ˆå¤§ï¼Œä½†å¯¹å½¼æ—¶çš„æˆ‘è€Œè¨€ç®—æ˜¯ä¸å¤ªå¤§çš„å¸®åŠ©ï¼Œè‡³å°‘æ²¡æœ‰å¤šå°‘æ€§ä»·æ¯”ã€‚</p><p>åœ¨è¿›å…¥è°·ç²’å•†åŸåï¼Œæ—¶é—´å·®ä¸å¤šå°±æ¥åˆ°äº†æ­£å¼å¼€å­¦ä¸€ä¸ªæ˜ŸæœŸï¼Œè™½ç„¶ä¹Ÿåœ¨ç¨³æ­¥è¿›å±•ï¼Œå´å§‹ç»ˆæ²¡æœ‰7æœˆ25æ—¥åˆ°å¼€å­¦å‰æ•ˆç‡é‚£ä¹ˆé«˜äº†ï¼Œå—é™äºå­¦æ ¡äº‹åŠ¡ç­‰ï¼Œæˆ‘å§‹ç»ˆæ— æ³•åƒçªåœ¨åœ¨å®¶ä¸€æ ·å…¨èº«å¿ƒå¾—æŠ•å…¥ï¼Œåœ¨å®¶é‡Œï¼Œæˆ‘å¯ä»¥æ—©ä¸Š9ç‚¹èµ·åºŠå­¦åˆ°12ç‚¹ï¼Œä¸‹åˆ2ç‚¹å­¦åˆ°6ç‚¹ï¼Œæ™šä¸Šå†ä»11ç‚¹å­¦çš„1ç‚¹ï¼Œæ¯å¤©åŸºæœ¬ä¸Šä¿æŒç€8å°æ—¶çš„å­¦ä¹ æ—¶é—´ï¼Œé‚£ä¸€ä¸ªæœˆä¹Ÿç®—æ˜¯æˆ‘è‡ªè®¤ä¸ºå­¦ä¹ æ•ˆç‡æœ€é«˜çš„ä¸€æ®µæ—¶é—´ã€‚åè§‚åœ¨å­¦æ ¡ï¼Œè‡ªæ‰“è¿›å…¥è°·ç²’å•†åŸï¼Œåˆ°å†™å‡ºè¿™ç¯‡æ–‡ç« çš„æ—¶å€™å·²ç»è¿‡å»äº†å·®ä¸å¤šä¸¤ä¸ªæœˆï¼Œå°½ç®¡æˆ‘å·²ç»å¾ˆä¹…æ²¡å»ä¸Šè¿‡è¯¾äº†ï¼Œä½†æ­¤æ—¶çš„æˆ‘ä»ç„¶è¿˜åœ¨è°·ç²’å•†åŸp256ï¼Œæ‰åˆšåˆ°é¡¹ç›®çš„å…«åˆ†ä¹‹äº”ï¼Œæˆ‘å½“åˆçš„è®¾æƒ³æ˜¯åæœˆæå®Œè°·ç²’å•†åŸï¼Œåä¸€æœˆå¼€å§‹è¾¹çœ‹å…«è‚¡è¾¹æŠ•å®ä¹ ï¼Œä½†ç»“æœå¹¶æœªè¾¾åˆ°é¢„æœŸã€‚è¿™å‰åçš„å¯¹æ¯”è®©æˆ‘ä¸å¾—ä¸æ„Ÿå¹å‰ä¸€ä¸ªæœˆçš„é«˜æ•ˆï¼Œé‚£æ˜¯æˆ‘å‡ºç”Ÿä»¥æ¥ç¬¬ä¸€æ¬¡ä»¥è‡ªå·±çš„æ„æ„¿è¡ŒåŠ¨è€Œä¸”è¾¾åˆ°äº†è‡ªè®¤ä¸ºæ•ˆç‡çš„å·…å³°ã€‚</p><h2 id="â€œæˆ‘è§‰å¾—æˆ‘æ˜¯â€"><a href="#â€œæˆ‘è§‰å¾—æˆ‘æ˜¯â€" class="headerlink" title="â€œæˆ‘è§‰å¾—æˆ‘æ˜¯â€"></a>â€œæˆ‘è§‰å¾—æˆ‘æ˜¯â€</h2><p>ä½†æ˜¯æ‚¨é—®æˆ‘ä¼šæ‰“ç®—ç»§ç»­ä¸‹å»å—ï¼Ÿä»€ä¹ˆæ—¶å€™èƒŒå…«è‚¡ï¼Ÿä»€ä¹ˆæ—¶å€™æŠ•å®ä¹ ï¼Ÿæˆ‘ä¸çŸ¥é“ï¼Œæˆ‘çœŸä¸çŸ¥é“ï¼Œæˆ‘å…¶å®ä¹Ÿåœ¨è§‚æœ›ï¼Œå·¥ä½œæˆ–æ˜¯è€ƒç ”ï¼Ÿæˆ‘å…¶å®æ˜¯ä¸€ç›´æœ‰ç€è€ƒç ”çš„æƒ³æ³•çš„ï¼Œä»æˆ‘ä¸Šå¤§å­¦çš„ä¸€å¼€å§‹å°±æœ‰äº†ï¼Œå®¶é‡Œäººä¹Ÿä¼šæ›´æ¨èæˆ‘è€ƒç ”ï¼Œå½“ç„¶äºæˆ‘è€Œè¨€è€ƒç ”æ„å‘³ç€æœ‰æœºä¼šæ‘†è„±æˆ‘åŒéçš„èº«ä»½ï¼Œå› æ­¤æ‰“ä»ä¸€å¼€å§‹æˆ‘å°±æ²¡æ‰“ç®—è¿‡è¦æœ¬ç§‘å·¥ä½œã€‚ä½†æ˜¯éšç€æŠ€æœ¯æ ˆçš„åŠ æ·±ï¼Œæˆ‘æ„è¯†åˆ°æˆ‘çš„æŠ€æœ¯æœ‰ä¸€å¤©ä¹Ÿè¾¾åˆ°ä¼ä¸šè¦æ±‚ï¼Œå¹¶ä¸”é‚£ä¸€å¤©åº”è¯¥ä¸ä¼šå¤ªä¹…ï¼Œåˆ°é‚£ä¸€å¤©æˆ‘çœŸçš„èƒ½æš‚æ—¶æ”¾ä¸‹ç†Ÿæ‚‰å·²ä¹…çš„æŠ€æœ¯è½¬è€Œå»æ²‰æ·€æ•°å­¦è‹±è¯­å—ï¼Ÿå³ä½¿æ˜¯åˆ°ç°åœ¨è¿™ä¸ªé‡è¦çš„èŠ‚ç‚¹ä¸Šï¼Œæˆ‘ä¹Ÿä»ç„¶æ²¡æœ‰èƒ½åšå‡ºä¸€ä¸ªæ˜ç¡®çš„é€‰æ‹©ã€‚</p><p>è¯´èµ·æ¥ï¼Œæˆ‘ä¸€ç›´éƒ½ä¸æ˜¯ä¸€ä¸ªåˆæ ¼çš„åšé¢˜å®¶ï¼Œä»å°åˆ°å¤§æˆ‘éƒ½æ˜¯é‚£ç§å¯¹å­¦ä¹ æŠ•å…¥å’Œäº§å‡ºä¸æˆæ­£æ¯”çš„å­¦ç”Ÿï¼Œåˆä¸­æ²¡è€ƒä¸Šå¸‚é‡ç‚¹é«˜ä¸­ï¼Œé«˜ä¸­å‰åŠå‡†å¤‡æ··åƒç­‰æ­»ï¼ŒååŠæœ‰å¹¸é‡åˆ°è´µäººå½»åº•ç‚¹é†’æˆ‘ï¼Œå¼€å§‹æœ‰æ•ˆç‡åœ°å­¦ä¹ ï¼Œæ„å»ºçŸ¥è¯†ä½“ç³»ã€åŸ¹å…»åº”è¯•æŠ€å·§ï¼Œåœ¨é‚£ä¸€æ®µæ—¶æœŸï¼Œæˆ‘å¹³ç”Ÿç¬¬ä¸€æ¬¡èƒ½å¤Ÿç‹¬ç«‹å®Œæ•´åœ°å°†æ¯ä¸ªå­¦ç§‘çœ‹ä¼¼å­¤ç«‹çš„çŸ¥è¯†ç‚¹ä¸²è”ï¼Œä»¥è„‘å’ŒA4çº¸ä¸ºä¾æ‰˜æ„å‡ºäº†ä¸€æ•´ä¸ªè”ç³»çš„æ•´ä½“ï¼Œæˆ‘ç»ˆäºä½“ä¼šåˆ°èƒ½å¤Ÿå®Œå…¨æŒæ¡ä¸€ä¸ªçŸ¥è¯†ç‚¹çš„ä¸€åˆ‡â€”â€”è¿™ç§æ„‰æ‚¦äº†ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™æ‚¨é—®æˆ‘æ˜¯åšé¢˜å®¶å—ï¼Œæˆ‘ä¼šå›ç­”â€œæˆ‘è§‰å¾—æˆ‘æ˜¯â€ï¼Œè‡³å°‘æˆ‘æœ‰ä¸€ç§æˆ‘æ˜¯åšé¢˜å®¶çš„æ„Ÿè§‰ï¼Œè€Œç»“æœä¼¼ä¹ä¹Ÿæ˜ è¯äº†è¿™ä¸€ç‚¹ï¼Œé‚£å¯èƒ½æ˜¯æˆ‘è¿‘å‡ å¹´å”¯ä¸€çš„é«˜å…‰ï¼ˆè‡ªè®¤ä¸ºï¼‰ã€‚ä¸è¿‡ä¸Šäº†å¤§å­¦ä»¥æ¥ï¼Œè¿™ä¸€ç‚¹ä¸€æ¬¡åˆä¸€æ¬¡è¢«æ‰“å¾—ç²‰ç¢ï¼ŒæŠ•å…¥å·¨å¤§çš„ç²¾åŠ›å¯¹çŸ¥è¯†è¿›è¡Œè§£æä¸²è”ï¼Œæœ€åä¹Ÿåªèƒ½æ‹¿åˆ°å…­ä¸ƒååˆ†çš„å·é¢ï¼Œè€Œæç¬‘çš„æ˜¯åªåšè¿‡å‡ é“é¢˜å°±åŒ†å¿™ä¸Šåœºçš„è€ƒè¯•ç”šè‡³èƒ½æ‹¿åˆ°æ¯”è¿™é«˜çš„åˆ†æ•°ğŸ˜‚ã€‚è¿™ä¸€åˆ‡è®©æˆ‘å¯¹è€ƒè¯•äº§ç”Ÿäº†æŠ—æ‹’ï¼Œä¸ç¨³å®šçš„å‘æŒ¥ï¼Ÿæ¯ä¸€æ¬¡è€ƒè¯•ç»“æœéƒ½åƒæ˜¯åœ¨èµŒåšï¼Œè¾“èµ¢ä¸å¦ä¼¼ä¹å’Œæˆ‘çš„åŠªåŠ›æ— å…³ï¼Ÿæ›´å¤§çš„å¯èƒ½æ˜¯æˆ‘æœ¬èº«åšé¢˜èƒ½åŠ›å°±ä½ä¸‹ï¼Œé«˜è€ƒä¸è¿‡ä¸€æ—¶èµŒè¿ï¼Œæˆ‘ä¸€ç›´éƒ½ä¸æ˜¯ä¸€ä¸ªåšé¢˜å®¶ã€‚æ€»ä¹‹ï¼Œæˆ‘å˜å¾—å®³æ€•è€ƒè¯•ï¼Œå®³æ€•èµ·è€ƒç ”ï¼Œå®³æ€•è€ƒç ”çš„æˆ‘ä¼šå˜æˆä¸€ä¸ªèµŒä¸Šå…¨éƒ¨å´ç»ˆæ— ç»“æœçš„èµŒå¾’ã€‚</p><p>å¦‚æœè€ƒè™‘åˆ°å¤§ç¯å¢ƒï¼Œå†ä¸‰å¹´ï¼Œè¡Œä¸šä¼šå‘å±•æˆä»€ä¹ˆæ ·ï¼Ÿä¼šä¸ä¼šä¸€è¹¶ä¸æŒ¯ï¼Ÿåˆ°æ—¶å€™ç¡•å£«ç”šè‡³æ˜¯2ç¡•çš„å«é‡‘é‡åˆä¼šè´¬å€¼åˆ°äº†ä»€ä¹ˆç¨‹åº¦äº†ï¼Ÿåˆ«å¿˜äº†25å¹´æ­£æ˜¯ç¡•å£«æ‰©æ‹›ä»¥æ¥æ¯•ä¸šç¬¬ä¸€å±Šï¼</p><h2 id="æ¥ä¸‹æ¥ï¼Ÿ"><a href="#æ¥ä¸‹æ¥ï¼Ÿ" class="headerlink" title="æ¥ä¸‹æ¥ï¼Ÿ"></a>æ¥ä¸‹æ¥ï¼Ÿ</h2><p>æ€»è¿˜æ˜¯è€ƒä¸ªç ”å§ï¼Œç ”ç©¶ç”Ÿå¥½æ­¹æ˜¯ä¸€è¾ˆå­çš„åå¤´ï¼Œäººå®¶ä¸€çœ¼å°±çŸ¥é“ä½ æ˜¯ä¸ªèƒ½æŠ—å‹çš„ç‰›é©¬ä¸æ˜¯ï¼Ÿä¸è¿‡ä»æˆ‘è‡ªèº«ä¸Šè®²ï¼Œä¸€æ–¹é¢æˆ‘ç¡®å®æ˜¯å¤ªèœäº†ï¼Œå¦ä¸€æ–¹é¢å…¥é—¨æ™šï¼Œéš”å£é‡é‚®çš„å¤§ç¥ï¼Œå¤§ä¸€æˆå¼€æºç¤¾åŒºç¬¬ä¸€è´¡çŒ®è€…çš„æœ‰ï¼Œå¤§äºŒæˆä¸ºå¤§å‚å®‰å…¨è´Ÿè´£äººçš„ä¹Ÿæœ‰ï¼Œå¤§ä¸‰è¿›å…¥å¤§å‚çš„æ›´æ˜¯ä¸€å¤§æŠŠï¼Œç‰›é€¼çš„äººæ°¸è¿œéƒ½æœ‰ï¼Œä»–ä»¬çš„æ‰€å¾—é…å¾—ä¸Šä»–ä»¬çš„ä»˜å‡ºï¼Œæˆ‘å¤§ä¸€å¤§äºŒå…¨æ··åƒç­‰æ­»å‡­ä»€ä¹ˆå¾—åˆ°ï¼Ÿéƒ½å¿«åä¸€æœˆäº†ï¼Œæˆ‘è¿˜ä¸æ˜¯åœ¨çŠ¹è±«ï¼Œåœ¨ç„¦è™‘ï¼Ÿè¯´å®è¯ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªæ‰¾å·¥ä½œçš„äººè¯¥æœ‰çš„çŠ¶æ€ï¼Œå°±è¿™ä¸ªæ ·å­å‡ºå»ä¸è¿˜æ˜¯åšäº›æœ€æ²¡æœ‰æŠ€æœ¯å«é‡çš„ä¸œè¥¿ï¼Ÿç°åœ¨å‡ºå»ä¸æ˜¯èµŒï¼ŸèµŒä¸‰å¹´ä¹‹åçš„è¡Œä¸šä¸è¿˜æ˜¯èµŒï¼Ÿç ”ç©¶ç”Ÿä¸‰å¹´ä½ ä¸è¿˜æœ‰ä¸¤å¹´æ—¶é—´æ‹¿æ¥å®ä¹ ï¼Ÿæ‚²è§‚ä»€ä¹ˆå‘¢ï¼Œä¸‹ä¸ªå†³å¿ƒå¾ˆéš¾å—ï¼Ÿ</p><p>å”‰ï¼Œè€ƒç ”äº†ã€‚</p><h2 id="æ‰€ä»¥â€œé—¨é•¿è…¿è·‘äº†â€æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ"><a href="#æ‰€ä»¥â€œé—¨é•¿è…¿è·‘äº†â€æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ" class="headerlink" title="æ‰€ä»¥â€œé—¨é•¿è…¿è·‘äº†â€æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ"></a>æ‰€ä»¥â€œé—¨é•¿è…¿è·‘äº†â€æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</h2><p>å¯¹å“¦ï¼Œè²Œä¼¼å…¨æ–‡ä¸€å¤§åŠéƒ½æ˜¯åœ¨æ€»ç»“æˆ‘çš„è¿‡å»ï¼Œåå€’æ˜¯é¢˜ç›®è¯´çš„javaç”šè‡³æ²¡æ€ä¹ˆéœ²è¿‡è„¸ğŸ˜‚</p><p>å°±æ˜¯å­—é¢æ„æ€å‘—ï¼Œä¸œè¥¿å¤ªå¤šäº†ï¼Œå­¦éƒ½å­¦ä¸å®Œï¼Œå­¦å®Œçš„ä¸œè¥¿é©¬ä¸Šå°±æœ‰æ–°æŠ€æœ¯èƒ½å¤Ÿå–ä»£ï¼Œæ°¸è¿œä¿æŒå­¦ä¹ ï¼Œåº”è¯¥æ˜¯è¿™ä¸€è¡Œè¯¥æœ‰çš„è§‰æ‚Ÿï¼Œå°±å¥½æ¯”å‰å‡ å¹´å­¦å®Œspringå•¥çš„å°±èƒ½åœ¨hré¢å‰å¤§å¹ç‰¹å¹ï¼Œä½†ç°åœ¨æ™®é€šäººå­¦äº†å¾®æœåŠ¡ä¹Ÿåªèƒ½ç®—æ˜¯åˆšè·¨è¿‡ç«äº‰é—¨æ§›çš„æ°´å¹³ï¼Œçº¢åˆ©æ¶ˆæ•£æ®†å°½ï¼Œæ‰“å·¥äººçš„æŠ€æœ¯æ°´å¹³åœ¨æå‡ï¼Œå²—ä½å´åœ¨å‡å°‘ï¼Œå°±ç®—é—¨æƒ³ä¸€ç›´ä¿è¯æ¯ä¸€ä¸ªæ‰“å·¥äººéƒ½èƒ½è·¨è¿‡è‡ªå·±ï¼Œæ— å¥ˆç°å®ä¾¿æ˜¯å¦‚æ­¤ï¼Œæˆ‘ä»¬æ¯ä¸€ä¸ªå·ç‹—ï¼Œéƒ½åœ¨æ— å½¢ä¹‹ä¸­æˆä¸ºäº†é—¨é•¿è…¿å¥”è·‘çš„åŠ©åŠ›ï¼Œåƒäºçš„æ°¸è¿œæ˜¯æ‰“å·¥äººï¼Œè°åœ¨è´Ÿé‡å‰è¡Œï¼Œè°åˆåœ¨å²æœˆé™å¥½ï¼Ÿ</p><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>ä»¥ååº”è¯¥æ˜¯æ²¡ç©ºå†™è¿™ä¹ˆæ‚çš„ä¸œè¥¿äº†ï¼Œä»¥åå¯èƒ½ä¼šæŠŠç¬”è®°å•¥çš„æ”¾ä¸Šæ¥ï¼Œå°½é‡æ›´æ–°å§ï¼Œæ¯•ç«Ÿæ˜¯è®°å½•å¿ƒè·¯å†ç¨‹çš„ä¸œè¥¿ï¼Œå°±ç®—æ˜¯ç¬¦å·ä»£ç ä¹Ÿèƒ½ä»£è¡¨ç€ä»€ä¹ˆï¼Œæ€»å¾—ç•™ä¸‹ç‚¹å§ã€‚</p><p>æ‹œæ‹œï¼Œç°åœ¨æ˜¯åŒ—äº¬æ—¶é—´2023å¹´10æœˆ26æ—¥ï¼Œæ˜å¤©å†™ç‚¹æ¶ˆæ¯é˜Ÿåˆ—çš„ä¸œè¥¿ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ç®—ä¸Šä»Šå¤©ï¼Œå­¦javaä¹Ÿå­¦äº†ä¸‰ä¸ªæœˆäº†ï¼Œæ„Ÿè§‰è¿˜æ˜¯æ²¡å•¥å®æ„Ÿï¼Œæ€ä¹ˆè¿™ä¹ˆå¿«å‘¢ï¼Ÿ&lt;/p&gt;
&lt;h2 id=&quot;â€œæˆ‘æ€ä¹ˆä¼šå­¦javaå‘¢ï¼Ÿâ€&quot;&gt;&lt;a href=&quot;#â€œæˆ‘æ€ä¹ˆä¼šå­¦javaå‘¢ï¼Ÿâ€&quot; class=&quot;headerlink&quot; title=&quot;â€œæˆ‘æ€ä¹ˆä¼šå­¦javaå‘¢ï¼Ÿâ€&quot;&gt;&lt;/a&gt;â€œæˆ‘æ€ä¹ˆä¼š</summary>
      
    
    
    
    
    <category term="ç”Ÿæ´»" scheme="https://github.com/KatzenyaSax/KatzenyaSax.github.io/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title>dockerçš„å®‰è£…åŠä½¿ç”¨</title>
    <link href="https://github.com/KatzenyaSax/KatzenyaSax.github.io/2023/10/24/152039/"/>
    <id>https://github.com/KatzenyaSax/KatzenyaSax.github.io/2023/10/24/152039/</id>
    <published>2023-10-24T07:20:39.000Z</published>
    <updated>2023-10-28T01:19:51.960Z</updated>
    
    <content type="html"><![CDATA[<p>ç”±äºé¡¹ç›®çš„æ•°æ®åº“å’Œä¸­é—´ä»¶éƒ½ä¼šéƒ¨ç½²åœ¨linuxç³»ç»Ÿä¸Šï¼Œæ‰€ä»¥ä½¿ç”¨dockerè¿™ä¸€å·¥å…·ã€‚</p><h1 id="dockerçš„å®‰è£…"><a href="#dockerçš„å®‰è£…" class="headerlink" title="dockerçš„å®‰è£…"></a>dockerçš„å®‰è£…</h1><p>å¦‚æœå«Œéº»çƒ¦ï¼Œå¯ä»¥ç›´æ¥å®‰è£…æœ€æ–°ç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure><p>å®‰è£…æŒ‡å®šç‰ˆæœ¬å¯ä»¥å‚è€ƒï¼š<a href="https://zhuanlan.zhihu.com/p/143156163">å¦‚ä½•åœ¨ Ubuntu 20.04 ä¸Šå®‰è£…å’Œä½¿ç”¨ Docker</a></p><h1 id="dockerçš„è¿è¡ŒåŠé…ç½®"><a href="#dockerçš„è¿è¡ŒåŠé…ç½®" class="headerlink" title="dockerçš„è¿è¡ŒåŠé…ç½®"></a>dockerçš„è¿è¡ŒåŠé…ç½®</h1><h2 id="è¿è¡Œdocker"><a href="#è¿è¡Œdocker" class="headerlink" title="è¿è¡Œdocker"></a>è¿è¡Œdocker</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹dockerç°æœ‰çš„é•œåƒ"><a href="#æŸ¥çœ‹dockerç°æœ‰çš„é•œåƒ" class="headerlink" title="æŸ¥çœ‹dockerç°æœ‰çš„é•œåƒ"></a>æŸ¥çœ‹dockerç°æœ‰çš„é•œåƒ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®dockerå¼€æœºè‡ªå¯åŠ¨"><a href="#è®¾ç½®dockerå¼€æœºè‡ªå¯åŠ¨" class="headerlink" title="è®¾ç½®dockerå¼€æœºè‡ªå¯åŠ¨"></a>è®¾ç½®dockerå¼€æœºè‡ªå¯åŠ¨</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> docker</span><br></pre></td></tr></table></figure><h2 id="å®¹å™¨å¼€æœºè‡ªå¯åŠ¨"><a href="#å®¹å™¨å¼€æœºè‡ªå¯åŠ¨" class="headerlink" title="å®¹å™¨å¼€æœºè‡ªå¯åŠ¨"></a>å®¹å™¨å¼€æœºè‡ªå¯åŠ¨</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker update (<span class="variable">$docker</span> ps -a -q) --restart=always</span><br></pre></td></tr></table></figure><h2 id="é…ç½®ä¸‹è½½åœ°å€"><a href="#é…ç½®ä¸‹è½½åœ°å€" class="headerlink" title="é…ç½®ä¸‹è½½åœ°å€"></a>é…ç½®ä¸‹è½½åœ°å€</h2><p>dockerçš„é…ç½®æœ€ä¸»è¦å°±æ˜¯é…ç½®ä¸‹è½½åœ°å€ï¼Œé€‰ç”¨å›½å†…çš„é˜¿é‡Œäº‘é•œåƒä¸‹è½½åœ°å€ï¼Œä¾æ¬¡æ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">mkdir</span> -p /etc/docker</span><br><span class="line">sudo <span class="built_in">tee</span> /etc/docker/daemon.json&lt;&lt;-<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">    &#123;</span><br><span class="line">    <span class="string">&quot;registry-mirrors&quot;</span>:[<span class="string">&quot;htte6jcuw6y. mirror.aliyuncscom&quot;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br></pre></td></tr></table></figure><p>å‚è€ƒæ–‡çŒ®ï¼š<a href="https://developer.aliyun.com/article/1245481?spm=a2c6h.14164896.0.0.1a9a47c5JPNQiV&scm=20140722.S_community@@%E6%96%87%E7%AB%A0@@1245481._.ID_1245481-RL_docker%E9%98%BF%E9%87%8C%E4%BA%91%E9%95%9C%E5%83%8F-LOC_search~UND~community~UND~item-OR_ser-V_3-">ä½¿ç”¨é˜¿é‡Œäº‘ docker é•œåƒåŠ é€Ÿ</a></p><h1 id="ä½¿ç”¨ä¾‹ï¼šdockerå®‰è£…mysql"><a href="#ä½¿ç”¨ä¾‹ï¼šdockerå®‰è£…mysql" class="headerlink" title="ä½¿ç”¨ä¾‹ï¼šdockerå®‰è£…mysql"></a>ä½¿ç”¨ä¾‹ï¼šdockerå®‰è£…mysql</h1><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull mysql</span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯ä¸‹è½½mysqlçš„æ ‡å‡†é•œåƒæ–‡ä»¶åˆ°æœ¬åœ°dockeråº“ä¸­</p><h2 id="åˆ›å»ºmysqlå®ä¾‹å¹¶è¿è¡Œ"><a href="#åˆ›å»ºmysqlå®ä¾‹å¹¶è¿è¡Œ" class="headerlink" title="åˆ›å»ºmysqlå®ä¾‹å¹¶è¿è¡Œ"></a>åˆ›å»ºmysqlå®ä¾‹å¹¶è¿è¡Œ</h2><p>å¥½æ¯”javaä¸­ç±»çš„æ¦‚å¿µï¼Œé•œåƒæ–‡ä»¶å°±æ˜¯Beanï¼›dockeråˆ›å»ºå®ä¾‹çš„è¡Œä¸ºå°±å¥½æ¯”Beançš„å®ä¾‹åŒ–ï¼Œåªæœ‰å…ˆå®ä¾‹åŒ–ä¸€ä¸ªBeançš„å¯¹è±¡æ‰èƒ½å¤Ÿä½¿ç”¨å…¶ä¸­çš„æ–¹æ³•ï¼›è€Œdockerçš„å®¹å™¨å°±æ˜¯jvmæ ˆåŒºï¼Œç”¨äºå­˜æ”¾å®ä¾‹åŒ–çš„å¯¹è±¡ã€‚<br>ç°åœ¨æˆ‘ä»¬è¯•åˆ›å»ºä¸€ä¸ªmysqlçš„å®ä¾‹åŒ–å¹¶è¿è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -itd --name mysql-test -p 3306:3306 -v /mydata/mysql/log:/var/log/mysql -v /mydata/mysql/data:/var/data/mysql -v /mydata/mysql/conf.d:/etc/mysql.d -e MYSQL_ROOT_PASSWORD=123456 mysql</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™è¡Œå‘½ä»¤çš„å‚æ•°å¯ä»¥ä½“ç°dockerè™šæ‹ŸåŒ–çš„ä¸€äº›ç‰¹å¾ï¼š<br>-p port1:port2ï¼Œå³å°†è½¯ä»¶åœ¨dockerçš„å†…éƒ¨ç«¯å£port2æ˜ å°„åˆ°ä¸»æœºï¼ˆlinuxè®¾å¤‡ï¼‰çš„port1ç«¯å£ï¼Œæ„æ€æ˜¯è®¿é—®ä¸»æœºçš„port1ç«¯å£ï¼Œç›¸å½“äºè®¿é—®dockerå†…éƒ¨çš„port2ç«¯å£ï¼›-v &#x2F;file1:&#x2F;file2ï¼Œå³å°†è½¯ä»¶åœ¨dockerå†…éƒ¨çš„æ–‡ä»¶æ˜ å°„åˆ°æœ¬æœºçš„å­˜å‚¨ä¸Šï¼Œæ„æ€æ˜¯ä¿®æ”¹ä¸»æœºçš„file1ä¸­çš„æ–‡ä»¶ï¼Œå°±ç›¸å½“äºä¿®æ”¹äº†dockerå†…éƒ¨file2ä¸­çš„æ–‡ä»¶ï¼ŒäºŒè€…å…·æœ‰åŒç­‰æ•ˆåŠ›ï¼›è€Œ-eå°±æ˜¯mysqlå¸¸è§„çš„å‚æ•°ï¼Œé…ç½®mysqlçš„å¯†ç ç­‰ï¼Œ-itdå°±æ˜¯-iã€-tã€-dåˆåœ¨ä¸€èµ·çš„ï¼Œ-dä½œç”¨å°±æ˜¯å°†è¯¥å®¹å™¨ä»¥å®ˆæŠ¤çº¿ç¨‹çš„å½¢å¼åå°å¼€å¯<br>æ‰€ä»¥ä¸ºä»€ä¹ˆdockerä¼šç»™å‡ºè¿™äº›å‚æ•°å‘¢ï¼Ÿå› ä¸ºdockerè¿è¡Œçš„è½¯ä»¶æ˜¯ä¸€ä¸ªé»‘åŒ£å­å˜›ï¼Œé‡Œé¢çš„æ‰€æœ‰ä¸œè¥¿å¤–é¢éƒ½æ˜¯ä¸å¥½çœ‹åˆ°çš„ï¼Œæ‰€ä»¥è¦é¢„ç•™ä¸€äº›ç‰¹æ®Šé€šé“ä¾›å¤–é¢çœ‹åˆ°ï¼ˆè®¿é—®ï¼‰å–½ã€‚<br>ä¸è¿‡æ€»ä¹‹æ˜¯è¿è¡Œèµ·æ¥äº†</p><p>ä½†æ˜¯ç”¨æˆ·ä¹Ÿå¯ä»¥æ‰‹åŠ¨è¿›å…¥dockerå†…éƒ¨ï¼Œä¾‹å¦‚è¿›å…¥ä¸€ä¸‹mysqlçš„å†…éƒ¨æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it ID /bin/bash</span><br></pre></td></tr></table></figure><p>-itè¡¨ç¤ºäº¤äº’å…³ç³»ï¼ŒIDè¡¨ç¤ºmysqlçš„å®¹å™¨idï¼Œè¿è¡Œådockerä¸æ˜¯åˆ†é…äº†ä¸€ä¸ªidå˜›ï¼Œå–å‰ä¸‰ä¸ªå°±å¯ä»¥äº†ã€‚è¿™é‡Œå°±ä¸å¤šæ¼”ç¤ºäº†ã€‚</p><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>ä¹‹åå†™å…¥mysqlçš„é…ç½®æ–‡ä»¶ï¼Œå°±åœ¨æ˜ å°„çš„æ–‡ä»¶ &#x2F;mydata&#x2F;mysqlé‡Œå†™ä¸€ä¸ªmy.cnfï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">user=mysql</span><br><span class="line">character-set-server=utf8</span><br><span class="line">default_authentication_plugin=mysql_native_password</span><br><span class="line">secure_file_priv=/var/lib/mysql</span><br><span class="line">expire_logs_days=7</span><br><span class="line">sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DAERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION</span><br><span class="line">max_connections=1000</span><br><span class="line">â€‹</span><br><span class="line">[client]</span><br><span class="line">default-character-set=utf8</span><br><span class="line">â€‹</span><br><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8</span><br></pre></td></tr></table></figure><p>ä¸»è¦æ˜¯ä¸ºäº†é…ç½®utfç¼–ç </p><h2 id="å®Œæˆå®‰è£…"><a href="#å®Œæˆå®‰è£…" class="headerlink" title="å®Œæˆå®‰è£…"></a>å®Œæˆå®‰è£…</h2><p>æœ€åé‡å¯å®¹å™¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart ID</span><br></pre></td></tr></table></figure><p>ä¾ç„¶æ˜¯å–å‰ä¸‰ä¸ªå°±è¡Œäº†</p><p>è¿™æ ·å°±ç®—å®‰è£…å®Œæˆäº†ï¼Œå¤–éƒ¨æœºå™¨è®¿é—®æœ¬æœºï¼ˆlinuxè®¾å¤‡ï¼‰çš„3306ç«¯å£å°±å¯ä»¥è®¿é—®åˆ°mysqläº†</p><h1 id="ä½¿ç”¨ä¾‹ï¼šdockerå®‰è£…redis"><a href="#ä½¿ç”¨ä¾‹ï¼šdockerå®‰è£…redis" class="headerlink" title="ä½¿ç”¨ä¾‹ï¼šdockerå®‰è£…redis"></a>ä½¿ç”¨ä¾‹ï¼šdockerå®‰è£…redis</h1><h2 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>æ‹‰å–é•œåƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull redis</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå®ä¾‹å¹¶è¿è¡Œ"><a href="#åˆ›å»ºå®ä¾‹å¹¶è¿è¡Œ" class="headerlink" title="åˆ›å»ºå®ä¾‹å¹¶è¿è¡Œ"></a>åˆ›å»ºå®ä¾‹å¹¶è¿è¡Œ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -itd --name redis-test -p 6379:6379 -v /mydata/redis/data:/data -v /mydata/redis/conf/redis.conf:/etc/redis/redis.conf -d redis redis-server /etc/redis/redis.conf</span><br></pre></td></tr></table></figure><p>redisé»˜è®¤æŒ‡å®šçš„ç«¯å£æ˜¯6379<br>å…¶ä¸­-dè¡¨ç¤ºä»¥&#x2F;etc&#x2F;redis&#x2F;redis.confä¸­çš„é…ç½®æ–‡ä»¶åå°è¿è¡Œï¼Œè€Œ&#x2F;etc&#x2F;redis&#x2F;redis.confä¸æ˜¯æ˜ å°„åˆ°&#x2F;mydata&#x2F;redis&#x2F;conf&#x2F;redis.confäº†å—ï¼Ÿæ‰€ä»¥å®é™…ä¸Šåœ¨å¤–éƒ¨é…ç½®é…ç½®æ–‡ä»¶å°±å¯ä»¥äº†ã€‚<br>é…ç½®å°±ä¸å¤šè¯´äº†ï¼Œæœ€ä¸»è¦çš„æŒä¹…åŒ–åŠŸèƒ½æ–°ç‰ˆrediså·²ç»é»˜è®¤æ”¯æŒäº†</p><h2 id="å®Œæˆå®‰è£…-1"><a href="#å®Œæˆå®‰è£…-1" class="headerlink" title="å®Œæˆå®‰è£…"></a>å®Œæˆå®‰è£…</h2><p>å¤–éƒ¨æœºå™¨è®¿é—®æœ¬æœºï¼ˆlinuxè®¾å¤‡ï¼‰çš„6379ç«¯å£å°±å¯ä»¥è®¿é—®åˆ°redisäº†</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ç”±äºé¡¹ç›®çš„æ•°æ®åº“å’Œä¸­é—´ä»¶éƒ½ä¼šéƒ¨ç½²åœ¨linuxç³»ç»Ÿä¸Šï¼Œæ‰€ä»¥ä½¿ç”¨dockerè¿™ä¸€å·¥å…·ã€‚&lt;/p&gt;
&lt;h1 id=&quot;dockerçš„å®‰è£…&quot;&gt;&lt;a href=&quot;#dockerçš„å®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;dockerçš„å®‰è£…&quot;&gt;&lt;/a&gt;dockerçš„å®‰è£…&lt;</summary>
      
    
    
    
    
    <category term="ä¸­é—´ä»¶" scheme="https://github.com/KatzenyaSax/KatzenyaSax.github.io/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/"/>
    
    <category term="docker" scheme="https://github.com/KatzenyaSax/KatzenyaSax.github.io/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://github.com/KatzenyaSax/KatzenyaSax.github.io/2023/10/24/101439/"/>
    <id>https://github.com/KatzenyaSax/KatzenyaSax.github.io/2023/10/24/101439/</id>
    <published>2023-10-24T02:14:26.000Z</published>
    <updated>2023-10-24T09:15:10.321Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</summary>
      
    
    
    
    
  </entry>
  
</feed>
